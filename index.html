<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DepoE: EO'nun DÃ¼kkanÄ±</title>
    <style>
        :root {
            --bg-color: #0f0c29;
            --bg-gradient: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --text-color: #ffffff;
            --accent-color: #ffd700; /* Gold */
            --danger-color: #ff4b4b;
            --success-color: #00e676;
            --eo-color: #d500f9;
            --black-market-color: #9d00ff;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-gradient);
            background-attachment: fixed;
            background-size: cover;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* UTILS - GLASSMORPHISM */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            box-shadow: var(--shadow);
        }

        .hidden { display: none !important; }

        .btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: var(--text-color);
            padding: 12px 24px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-transform: uppercase;
            margin: 5px;
            border-radius: 12px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            backdrop-filter: blur(4px);
        }
        .btn:hover {
            background: var(--accent-color);
            color: #000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        .btn-danger:hover {
             background: var(--danger-color);
             box-shadow: 0 5px 15px rgba(255, 75, 75, 0.4);
        }
        .btn-purple:hover {
            background: var(--eo-color);
            color: white;
            box-shadow: 0 5px 15px rgba(213, 0, 249, 0.4);
        }

        .btn:disabled {
            border-color: rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.3);
            cursor: not-allowed;
            background: rgba(0,0,0,0.2);
            transform: none;
            box-shadow: none;
        }

        /* HEADER */
        header {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(15px);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--glass-border);
            z-index: 100;
        }
        .stats {
            display: flex;
            gap: 25px;
        }
        .stat-box {
            text-align: right;
        }
        .stat-label {
            color: rgba(255,255,255,0.6);
            font-size: 0.75rem;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        .money { color: var(--success-color); font-weight: bold; }

        .logo {
            font-weight: 900;
            font-size: 1.8rem;
            background: linear-gradient(to right, #ffd700, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        /* MAIN CONTENT AREA */
        main {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Changed from center to allow scrolling if needed */
        }

        /* SCREENS */
        .screen {
            width: 100%;
            max-width: 900px;
            text-align: center;
            animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1);
            padding: 30px;
            margin-top: 20px;
        }

        /* Glass Panel Container for Screens */
        .screen-glass {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: var(--shadow);
            padding: 40px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); scale: 0.95; }
            to { opacity: 1; transform: translateY(0); scale: 1; }
        }

        /* STORAGE SELECTION */
        .storage-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        .storage-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            padding: 20px;
            border-radius: 16px;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 200px;
            position: relative;
            overflow: hidden;
        }
        .storage-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-color);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }
        .storage-card h3 { margin-top: 0; color: var(--accent-color); }

        .storage-card.black-market {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border-color: #ff0000;
            color: #e0e0e0;
            font-weight: 800;
            box-shadow: 0 0 20px rgba(139, 0, 0, 0.5);
            animation: pulse-red 2s infinite;
        }
        .storage-card.black-market h3 { color: #ff0000; }
        .storage-card.black-market p { font-weight: 800; }

        .storage-card.black-market .unit-price {
            color: #ff0000 !important;
            text-shadow: 0 0 15px rgba(255, 0, 0, 0.8) !important;
        }

        @keyframes pulse-red {
            0% { box-shadow: 0 0 20px #8b0000; }
            50% { box-shadow: 0 0 35px #ff0000; }
            100% { box-shadow: 0 0 20px #8b0000; }
        }

        .risk-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 10px;
        }
        .risk-low { background: rgba(0, 230, 118, 0.2); color: #00e676; }
        .risk-med { background: rgba(255, 215, 0, 0.2); color: #ffd700; }
        .risk-high { background: rgba(255, 75, 75, 0.2); color: #ff4b4b; }
        .risk-black { background: rgba(0, 0, 0, 0.9); color: #ff0000; }

        /* ITEM REVEAL & LISTS */
        .item-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
            text-align: left;
        }
        .item-row {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px 20px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid transparent;
            transition: all 0.2s;
        }
        .item-row:hover { background: rgba(255,255,255,0.05); }

        .rarity-junk { border-color: #9e9e9e; }
        .rarity-common { border-color: var(--success-color); }
        .rarity-rare { border-color: var(--accent-color); }
        .rarity-legendary { border-color: #ffeb3b; background: linear-gradient(90deg, rgba(255, 235, 59, 0.1), transparent); }

        .certified-badge {
            background: var(--accent-color);
            color: #000;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 8px;
            vertical-align: middle;
        }

        /* NEGOTIATION SCENE */
        .scene-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            background: url('https://images.unsplash.com/photo-1550523092-234293e50669?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.8);
            border: 1px solid var(--glass-border);
        }

        /* Dark overlay for the background image */
        .scene-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(15, 12, 41, 0.7);
            z-index: 1;
        }

        .eo-avatar-container {
            z-index: 2;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }

        .eo-avatar {
            font-size: 80px;
            background: radial-gradient(circle, rgba(156, 39, 176, 0.5) 0%, rgba(0,0,0,0) 70%);
            padding: 20px;
            border-radius: 50%;
            animation: float 3s ease-in-out infinite;
            text-shadow: 0 0 30px var(--eo-color);
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .speech-bubble {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 15px 25px;
            border-radius: 20px;
            border-bottom-left-radius: 0;
            max-width: 60%;
            margin-top: 10px;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            position: relative;
            z-index: 3;
            text-align: left;
        }
        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: rgba(255, 255, 255, 0.95) transparent;
        }

        .negotiation-desk {
            z-index: 2;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-top: 1px solid var(--glass-border);
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .desk-item {
            flex: 1;
            text-align: left;
        }

        .desk-actions {
            flex: 2;
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-end;
            gap: 10px;
        }

        /* HUB MENU */
        .hub-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .hub-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            padding: 30px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        .hub-card:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-5px);
            border-color: var(--accent-color);
        }
        .hub-icon { font-size: 3rem; }
        .hub-title { font-size: 1.2rem; font-weight: bold; }

        /* AUCTION SCREEN */
        .auction-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .auction-main {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .auction-visual {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 30px;
            position: relative;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 2px solid var(--glass-border);
        }
        .current-bid-display {
            font-size: 4rem;
            font-weight: 900;
            color: var(--success-color);
            text-shadow: 0 0 30px rgba(0, 230, 118, 0.4);
        }
        .timer-display {
            font-size: 1.5rem;
            color: var(--danger-color);
            font-weight: bold;
            margin-top: 10px;
            height: 30px;
        }

        .opponents-grid {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        .opponent-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            padding: 10px;
            border-radius: 12px;
            width: 80px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }
        .opponent-card.active-bidder {
            border-color: var(--char-color);
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
            box-shadow: 0 0 25px var(--char-color), inset 0 0 10px var(--char-color);
        }
        .opponent-card.folded {
            opacity: 0.3;
            filter: grayscale(1);
        }
        .opponent-avatar { font-size: 2.5rem; }
        .opponent-name { font-size: 0.7rem; margin-top: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .last-action {
            position: absolute;
            top: -10px; right: -10px;
            background: var(--accent-color);
            color: #000;
            font-size: 0.7rem;
            padding: 2px 5px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }

        .bid-log {
            background: rgba(0,0,0,0.5);
            height: 150px;
            overflow-y: auto;
            border-radius: 10px;
            padding: 10px;
            text-align: left;
            font-family: monospace;
            font-size: 0.9rem;
            border: 1px solid var(--glass-border);
        }
        .log-entry { margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 2px; }
        .log-entry.high-bid { color: var(--success-color); font-weight: bold; }
        .log-entry.fold { color: var(--danger-color); font-style: italic; }

        .player-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        /* SPEECH BUBBLES FOR AUCTION */
        .mini-bubble {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid var(--char-color);
            color: #fff;
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 100;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
            box-shadow: 0 0 15px var(--char-color);
            text-shadow: none;
            font-weight: bold;
        }

        .bubble-top {
            bottom: 110%;
        }
        .bubble-top::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 8px 8px 0;
            border-style: solid;
            border-color: var(--char-color) transparent transparent transparent;
        }

        .bubble-bottom {
            top: 110%;
        }
        .bubble-bottom::after {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 8px 8px;
            border-style: solid;
            border-color: transparent transparent var(--char-color) transparent;
        }

        @keyframes popIn {
            from { opacity: 0; transform: translateX(-50%) scale(0.5); }
            to { opacity: 1; transform: translateX(-50%) scale(1); }
        }

    </style>
</head>
<body>

    <header>
        <div class="logo">DepoE ğŸ“¦</div>
        <div class="stats">
            <div class="stat-box">
                <span class="stat-label">ğŸ—“ï¸ TUR</span><br>
                <span id="ui-round">1</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">ğŸ’° BAKÄ°YE</span><br>
                <span id="ui-money" class="money">1000 â‚º</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">ğŸ¤ Ä°TÄ°BAR</span><br>
                <span id="ui-reputation">NÃ¶tr</span>
            </div>
        </div>
    </header>

    <main id="app">
        <!-- Screens will be injected here by JS -->
        <div id="loading" class="screen">
            <h2>YÃ¼kleniyor...</h2>
        </div>
    </main>

    <script>
        // --- CONFIG & CONSTANTS ---
        const GAME_CONFIG = {
            startMoney: 2000, // Enough for a low tier unit
            maxRounds: 999, // Infinite for now
        };

        const RARITY = {
            JUNK: { id: 'junk', label: 'Hurda', color: '#9e9e9e', mult: 0.5 },
            COMMON: { id: 'common', label: 'SÄ±radan', color: '#4caf50', mult: 1.0 },
            RARE: { id: 'rare', label: 'Nadir', color: '#ff9800', mult: 2.5 },
            LEGENDARY: { id: 'legendary', label: 'Efsanevi', color: '#ffeb3b', mult: 10.0 }
        };

        const ITEMS_DB = [
            { name: "DeÄŸersiz BÄ±Ã§ak", type: "junk", baseValue: 38 },
            { name: "ParÃ§alanmÄ±ÅŸ Vazo", type: "junk", baseValue: 35 },
            { name: "Hurda Mandal", type: "junk", baseValue: 17 },
            { name: "Eski Mandal", type: "junk", baseValue: 63 },
            { name: "KokmuÅŸ YapÄ±ÅŸtÄ±rÄ±cÄ±", type: "junk", baseValue: 75 },
            { name: "KÃ¼flÃ¼ Bant", type: "junk", baseValue: 28 },
            { name: "Islak Kavanoz", type: "junk", baseValue: 65 },
            { name: "Soluk Plastik ÅiÅŸe", type: "junk", baseValue: 98 },
            { name: "Patlak Tekerlek", type: "junk", baseValue: 59 },
            { name: "Yamuk Tencere", type: "junk", baseValue: 38 },
            { name: "KokmuÅŸ Sabun", type: "junk", baseValue: 98 },
            { name: "DeÄŸersiz Hortum", type: "junk", baseValue: 95 },
            { name: "Patlak DiÅŸ FÄ±rÃ§asÄ±", type: "junk", baseValue: 57 },
            { name: "KullanÄ±lamaz Masa Ã–rtÃ¼sÃ¼", type: "junk", baseValue: 91 },
            { name: "Bozuk Tencere", type: "junk", baseValue: 33 },
            { name: "KÄ±rÄ±k Ä°p", type: "junk", baseValue: 29 },
            { name: "Delik Kova", type: "junk", baseValue: 58 },
            { name: "PaslÄ± Oyuncak", type: "junk", baseValue: 79 },
            { name: "Yamuk Bardak", type: "junk", baseValue: 76 },
            { name: "KÃ¼flÃ¼ Tencere", type: "junk", baseValue: 99 },
            { name: "Eski SÃ¼pÃ¼rge", type: "junk", baseValue: 7 },
            { name: "KokmuÅŸ Priz", type: "junk", baseValue: 55 },
            { name: "KokmuÅŸ Bant", type: "junk", baseValue: 63 },
            { name: "KÃ¼flÃ¼ Plastik ÅiÅŸe", type: "junk", baseValue: 7 },
            { name: "ParÃ§alanmÄ±ÅŸ Disket", type: "junk", baseValue: 13 },
            { name: "YanÄ±k HalÄ±", type: "junk", baseValue: 90 },
            { name: "Replika Plastik ÅiÅŸe", type: "junk", baseValue: 86 },
            { name: "DeÄŸersiz Ayna", type: "junk", baseValue: 20 },
            { name: "Eski Tava", type: "junk", baseValue: 82 },
            { name: "Replika Tabak", type: "junk", baseValue: 42 },
            { name: "Delik Bez", type: "junk", baseValue: 84 },
            { name: "Replika Tekerlek", type: "junk", baseValue: 51 },
            { name: "Kirli Hortum", type: "junk", baseValue: 72 },
            { name: "Delik Åampuan", type: "junk", baseValue: 71 },
            { name: "KullanÄ±lamaz Terlik", type: "junk", baseValue: 70 },
            { name: "YÄ±rtÄ±k Kova", type: "junk", baseValue: 65 },
            { name: "Patlak Tabak", type: "junk", baseValue: 95 },
            { name: "Delik GÃ¶mlek", type: "junk", baseValue: 39 },
            { name: "YanÄ±k Åarj Aleti", type: "junk", baseValue: 35 },
            { name: "Tozlu Tekerlek", type: "junk", baseValue: 90 },
            { name: "Eski Tarak", type: "junk", baseValue: 89 },
            { name: "ParÃ§alanmÄ±ÅŸ Plastik ÅiÅŸe", type: "junk", baseValue: 98 },
            { name: "YÄ±rtÄ±k Tekerlek", type: "junk", baseValue: 24 },
            { name: "YÄ±rtÄ±k Priz", type: "junk", baseValue: 26 },
            { name: "Yamuk Kalem", type: "junk", baseValue: 9 },
            { name: "KÃ¼flÃ¼ Paspas", type: "junk", baseValue: 82 },
            { name: "YanÄ±k Bardak", type: "junk", baseValue: 42 },
            { name: "ParÃ§alanmÄ±ÅŸ Mouse", type: "junk", baseValue: 54 },
            { name: "Ã‡Ã¶p Sabun", type: "junk", baseValue: 82 },
            { name: "Adi Kutu 36", type: "junk", baseValue: 70 },
            { name: "KullanÄ±lamaz Priz", type: "junk", baseValue: 77 },
            { name: "ParÃ§alanmÄ±ÅŸ Dergi", type: "junk", baseValue: 37 },
            { name: "ParÃ§alanmÄ±ÅŸ Terlik", type: "junk", baseValue: 12 },
            { name: "Lekeli Plastik ÅiÅŸe", type: "junk", baseValue: 24 },
            { name: "ParÃ§alanmÄ±ÅŸ Silgi 83", type: "junk", baseValue: 67 },
            { name: "Sahte Paspas", type: "junk", baseValue: 10 },
            { name: "YanÄ±k Ä°p", type: "junk", baseValue: 14 },
            { name: "Tozlu Vazo", type: "junk", baseValue: 78 },
            { name: "YanÄ±k CD", type: "junk", baseValue: 47 },
            { name: "KullanÄ±lamaz Pantolon", type: "junk", baseValue: 94 },
            { name: "Delik Bant", type: "junk", baseValue: 96 },
            { name: "Adi HalÄ±", type: "junk", baseValue: 40 },
            { name: "Sahte Ã‡orap", type: "junk", baseValue: 88 },
            { name: "Delik Bardak", type: "junk", baseValue: 75 },
            { name: "Sahte AyakkabÄ±", type: "junk", baseValue: 49 },
            { name: "Bozuk HalÄ±", type: "junk", baseValue: 71 },
            { name: "EzilmiÅŸ AyakkabÄ±", type: "junk", baseValue: 15 },
            { name: "Adi Ampul", type: "junk", baseValue: 52 },
            { name: "KullanÄ±lamaz AskÄ±", type: "junk", baseValue: 32 },
            { name: "KokmuÅŸ BÄ±Ã§ak", type: "junk", baseValue: 5 },
            { name: "KullanÄ±lamaz Åarj Aleti", type: "junk", baseValue: 72 },
            { name: "Bozuk KulaklÄ±k", type: "junk", baseValue: 5 },
            { name: "KÄ±rÄ±k Dergi", type: "junk", baseValue: 20 },
            { name: "ParÃ§alanmÄ±ÅŸ BÄ±Ã§ak", type: "junk", baseValue: 99 },
            { name: "Hurda Musluk 86", type: "junk", baseValue: 36 },
            { name: "KÃ¼flÃ¼ Mandal", type: "junk", baseValue: 73 },
            { name: "KullanÄ±lamaz Hortum 54", type: "junk", baseValue: 55 },
            { name: "AtÄ±k Bardak", type: "junk", baseValue: 24 },
            { name: "YÄ±rtÄ±k Sandalye", type: "junk", baseValue: 49 },
            { name: "Islak Musluk", type: "junk", baseValue: 55 },
            { name: "Eski Ã‡atal", type: "junk", baseValue: 88 },
            { name: "Soluk Makas", type: "junk", baseValue: 25 },
            { name: "YÄ±rtÄ±k Ã‡atal", type: "junk", baseValue: 49 },
            { name: "EzilmiÅŸ Disket", type: "junk", baseValue: 84 },
            { name: "Soluk CD", type: "junk", baseValue: 74 },
            { name: "Islak AskÄ±", type: "junk", baseValue: 62 },
            { name: "Ã‡atlak AnahtarlÄ±k", type: "junk", baseValue: 27 },
            { name: "KullanÄ±lamaz BÄ±Ã§ak", type: "junk", baseValue: 85 },
            { name: "Adi Disket", type: "junk", baseValue: 43 },
            { name: "AtÄ±k Vazo", type: "junk", baseValue: 27 },
            { name: "Lekeli Bardak", type: "junk", baseValue: 93 },
            { name: "Adi AnahtarlÄ±k", type: "junk", baseValue: 93 },
            { name: "AtÄ±k Paspas", type: "junk", baseValue: 55 },
            { name: "DeÄŸersiz Ampul", type: "junk", baseValue: 63 },
            { name: "Eski Bant 20", type: "junk", baseValue: 24 },
            { name: "Hurda Cetvel", type: "junk", baseValue: 28 },
            { name: "KÄ±rÄ±k Tabak", type: "junk", baseValue: 13 },
            { name: "Yamuk AnahtarlÄ±k", type: "junk", baseValue: 54 },
            { name: "Yamuk Sandalye", type: "junk", baseValue: 61 },
            { name: "Replika Dergi", type: "junk", baseValue: 49 },
            { name: "DeÄŸersiz Kavanoz", type: "junk", baseValue: 10 },
            { name: "Yamuk Ä°p", type: "junk", baseValue: 25 },
            { name: "Adi Plastik ÅiÅŸe", type: "junk", baseValue: 57 },
            { name: "Bozuk Sabun", type: "junk", baseValue: 77 },
            { name: "Islak KulaklÄ±k", type: "junk", baseValue: 53 },
            { name: "KÄ±rÄ±k Bant", type: "junk", baseValue: 54 },
            { name: "EzilmiÅŸ Bant", type: "junk", baseValue: 55 },
            { name: "Sahte Ã‡erÃ§eve", type: "junk", baseValue: 32 },
            { name: "KÃ¼flÃ¼ AnahtarlÄ±k 41", type: "junk", baseValue: 64 },
            { name: "KullanÄ±lamaz Kavanoz", type: "junk", baseValue: 41 },
            { name: "YÄ±rtÄ±k Tarak", type: "junk", baseValue: 84 },
            { name: "ParÃ§alanmÄ±ÅŸ Pil", type: "junk", baseValue: 86 },
            { name: "DeÄŸersiz DVD", type: "junk", baseValue: 98 },
            { name: "DeÄŸersiz Oyuncak 59", type: "junk", baseValue: 36 },
            { name: "EzilmiÅŸ Pantolon", type: "junk", baseValue: 42 },
            { name: "Soluk Kaset", type: "junk", baseValue: 94 },
            { name: "Replika BÄ±Ã§ak", type: "junk", baseValue: 14 },
            { name: "Bozuk Mouse", type: "junk", baseValue: 34 },
            { name: "Yamuk GÃ¶mlek", type: "junk", baseValue: 87 },
            { name: "Hurda Gazete", type: "junk", baseValue: 48 },
            { name: "ParÃ§alanmÄ±ÅŸ Oyuncak", type: "junk", baseValue: 81 },
            { name: "Delik Musluk", type: "junk", baseValue: 9 },
            { name: "KullanÄ±lamaz Hortum", type: "junk", baseValue: 43 },
            { name: "Delik Mouse", type: "junk", baseValue: 11 },
            { name: "Kirli Klavye", type: "junk", baseValue: 19 },
            { name: "Bozuk Dergi", type: "junk", baseValue: 25 },
            { name: "Islak Ã‡atal", type: "junk", baseValue: 73 },
            { name: "KÄ±rÄ±k KaÅŸÄ±k", type: "junk", baseValue: 31 },
            { name: "Kirli Pantolon 27", type: "junk", baseValue: 24 },
            { name: "Bozuk Sandalye", type: "junk", baseValue: 46 },
            { name: "Kirli Priz", type: "junk", baseValue: 96 },
            { name: "ParÃ§alanmÄ±ÅŸ Kutu 79", type: "junk", baseValue: 99 },
            { name: "Patlak Bez", type: "junk", baseValue: 89 },
            { name: "DeÄŸersiz Tabak", type: "junk", baseValue: 80 },
            { name: "YÄ±rtÄ±k Oyuncak", type: "junk", baseValue: 21 },
            { name: "PaslÄ± Cetvel", type: "junk", baseValue: 22 },
            { name: "ParÃ§alanmÄ±ÅŸ Tarak", type: "junk", baseValue: 29 },
            { name: "Patlak SaksÄ±", type: "junk", baseValue: 65 },
            { name: "Patlak Gazete", type: "junk", baseValue: 22 },
            { name: "Yamuk Defter", type: "junk", baseValue: 70 },
            { name: "EzilmiÅŸ Tekerlek", type: "junk", baseValue: 48 },
            { name: "Replika Sabun", type: "junk", baseValue: 86 },
            { name: "EzilmiÅŸ Tabak", type: "junk", baseValue: 23 },
            { name: "Replika Bant", type: "junk", baseValue: 22 },
            { name: "PaslÄ± Kaset", type: "junk", baseValue: 31 },
            { name: "PaslÄ± Musluk", type: "junk", baseValue: 27 },
            { name: "AtÄ±k Priz", type: "junk", baseValue: 46 },
            { name: "Delik Makas", type: "junk", baseValue: 50 },
            { name: "Tozlu Bardak", type: "junk", baseValue: 64 },
            { name: "KÄ±rÄ±k Tencere", type: "junk", baseValue: 26 },
            { name: "Adi AskÄ±", type: "junk", baseValue: 51 },
            { name: "YÄ±rtÄ±k Plastik ÅiÅŸe", type: "junk", baseValue: 49 },
            { name: "Lekeli Oyuncak", type: "junk", baseValue: 55 },
            { name: "Yamuk BÄ±Ã§ak", type: "junk", baseValue: 97 },
            { name: "Tozlu Paspas", type: "junk", baseValue: 11 },
            { name: "Eski SaksÄ±", type: "junk", baseValue: 22 },
            { name: "AtÄ±k Åampuan", type: "junk", baseValue: 6 },
            { name: "YanÄ±k Bant", type: "junk", baseValue: 76 },
            { name: "Islak Gazete", type: "junk", baseValue: 12 },
            { name: "Lekeli Kova", type: "junk", baseValue: 99 },
            { name: "Patlak Disket", type: "junk", baseValue: 62 },
            { name: "KullanÄ±lamaz Kutu", type: "junk", baseValue: 57 },
            { name: "Replika Tarak", type: "junk", baseValue: 88 },
            { name: "Bozuk Kumanda", type: "junk", baseValue: 9 },
            { name: "PaslÄ± Ã‡orap 19", type: "junk", baseValue: 61 },
            { name: "AtÄ±k Cetvel", type: "junk", baseValue: 77 },
            { name: "EzilmiÅŸ Musluk", type: "junk", baseValue: 78 },
            { name: "Delik Masa Ã–rtÃ¼sÃ¼", type: "junk", baseValue: 29 },
            { name: "EzilmiÅŸ Pil", type: "junk", baseValue: 11 },
            { name: "Bozuk Ä°p", type: "junk", baseValue: 7 },
            { name: "Eski Perde", type: "junk", baseValue: 100 },
            { name: "Islak Åarj Aleti", type: "junk", baseValue: 34 },
            { name: "Kirli Kumanda", type: "junk", baseValue: 71 },
            { name: "KÄ±rÄ±k Klavye", type: "junk", baseValue: 88 },
            { name: "Islak Kalem", type: "junk", baseValue: 81 },
            { name: "KÃ¼flÃ¼ Bez", type: "junk", baseValue: 59 },
            { name: "YÄ±rtÄ±k Hortum", type: "junk", baseValue: 52 },
            { name: "AtÄ±k Kalem 76", type: "junk", baseValue: 24 },
            { name: "KÄ±rÄ±k Kutu", type: "junk", baseValue: 49 },
            { name: "KullanÄ±lamaz Vazo", type: "junk", baseValue: 50 },
            { name: "Patlak Musluk", type: "junk", baseValue: 77 },
            { name: "KÃ¼flÃ¼ Bez 40", type: "junk", baseValue: 38 },
            { name: "Delik Klavye", type: "junk", baseValue: 98 },
            { name: "Patlak Kumanda", type: "junk", baseValue: 77 },
            { name: "YanÄ±k Silgi", type: "junk", baseValue: 63 },
            { name: "Soluk Bez", type: "junk", baseValue: 54 },
            { name: "ParÃ§alanmÄ±ÅŸ DiÅŸ FÄ±rÃ§asÄ±", type: "junk", baseValue: 91 },
            { name: "YÄ±rtÄ±k SaksÄ±", type: "junk", baseValue: 69 },
            { name: "Eksik Ã‡atal", type: "junk", baseValue: 38 },
            { name: "ParÃ§alanmÄ±ÅŸ Kalem", type: "junk", baseValue: 13 },
            { name: "ParÃ§alanmÄ±ÅŸ Priz", type: "junk", baseValue: 35 },
            { name: "Ã‡Ã¶p HalÄ±", type: "junk", baseValue: 30 },
            { name: "DeÄŸersiz Cetvel", type: "junk", baseValue: 27 },
            { name: "AtÄ±k Terlik", type: "junk", baseValue: 8 },
            { name: "AtÄ±k Kutu 14", type: "junk", baseValue: 73 },
            { name: "ParÃ§alanmÄ±ÅŸ Åarj Aleti", type: "junk", baseValue: 28 },
            { name: "Patlak AskÄ±", type: "junk", baseValue: 23 },
            { name: "Ã‡atlak Oyuncak", type: "junk", baseValue: 50 },
            { name: "KÃ¼flÃ¼ Kaset", type: "junk", baseValue: 16 },
            { name: "KÄ±rÄ±k YapÄ±ÅŸtÄ±rÄ±cÄ±", type: "junk", baseValue: 18 },
            { name: "AhÅŸap Laptop", type: "common", baseValue: 249 },
            { name: "Deri Tablet", type: "common", baseValue: 623 },
            { name: "Kutusuz Paten", type: "common", baseValue: 357 },
            { name: "Ucuz SaÃ§ Kurutma Makinesi", type: "common", baseValue: 768 },
            { name: "Renkli TarayÄ±cÄ±", type: "common", baseValue: 303 },
            { name: "Retro Ä°ngiliz AnahtarÄ±", type: "common", baseValue: 744 },
            { name: "Desenli GÃ¶zlÃ¼k", type: "common", baseValue: 674 },
            { name: "Modern ParfÃ¼m", type: "common", baseValue: 677 },
            { name: "Garantisiz GÃ¶zlÃ¼k", type: "common", baseValue: 544 },
            { name: "Ã‡in MalÄ± Mikser", type: "common", baseValue: 530 },
            { name: "Klasik YazÄ±cÄ±", type: "common", baseValue: 153 },
            { name: "Ucuz Mikser", type: "common", baseValue: 176 },
            { name: "Yerli MalÄ± Termos", type: "common", baseValue: 414 },
            { name: "Garantisiz Saat", type: "common", baseValue: 541 },
            { name: "Az KullanÄ±lmÄ±ÅŸ Tost Makinesi", type: "common", baseValue: 433 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda Testere", type: "common", baseValue: 317 },
            { name: "Cam VantilatÃ¶r", type: "common", baseValue: 567 },
            { name: "Cam IsÄ±tÄ±cÄ±", type: "common", baseValue: 740 },
            { name: "Retro TakÄ± Kutusu", type: "common", baseValue: 643 },
            { name: "Klasik Mikrodalga", type: "common", baseValue: 618 },
            { name: "Desenli Mikser", type: "common", baseValue: 539 },
            { name: "Ä°thal Ayna", type: "common", baseValue: 284 },
            { name: "Cam CÃ¼zdan", type: "common", baseValue: 241 },
            { name: "Cam Ã‡ekiÃ§", type: "common", baseValue: 452 },
            { name: "Yerli MalÄ± Top", type: "common", baseValue: 477 },
            { name: "Kutusuz Makyaj Seti", type: "common", baseValue: 230 },
            { name: "AhÅŸap SaÃ§ Kurutma Makinesi", type: "common", baseValue: 405 },
            { name: "Kutusuz Matkap", type: "common", baseValue: 181 },
            { name: "Ä°thal SÄ±rt Ã‡antasÄ±", type: "common", baseValue: 729 },
            { name: "Vintage Avize", type: "common", baseValue: 691 },
            { name: "Ä°kinci El Tornavida Seti", type: "common", baseValue: 697 },
            { name: "Ucuz Paten", type: "common", baseValue: 764 },
            { name: "AhÅŸap YazÄ±cÄ±", type: "common", baseValue: 156 },
            { name: "Modern VantilatÃ¶r", type: "common", baseValue: 560 },
            { name: "AhÅŸap Paten", type: "common", baseValue: 328 },
            { name: "KumaÅŸ IsÄ±tÄ±cÄ±", type: "common", baseValue: 244 },
            { name: "Retro HalÄ±", type: "common", baseValue: 786 },
            { name: "Desenli HalÄ±", type: "common", baseValue: 576 },
            { name: "Yerli MalÄ± Ayna", type: "common", baseValue: 751 },
            { name: "AhÅŸap Makyaj Seti", type: "common", baseValue: 718 },
            { name: "Deri Bisiklet", type: "common", baseValue: 712 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda Pense", type: "common", baseValue: 561 },
            { name: "Retro IsÄ±tÄ±cÄ±", type: "common", baseValue: 179 },
            { name: "Ä°thal Bisiklet", type: "common", baseValue: 152 },
            { name: "Retro Kaykay", type: "common", baseValue: 254 },
            { name: "Metal Tost Makinesi", type: "common", baseValue: 757 },
            { name: "Renkli Makyaj Seti", type: "common", baseValue: 635 },
            { name: "Renkli Saat", type: "common", baseValue: 418 },
            { name: "MarkasÄ±z Termos", type: "common", baseValue: 360 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda VantilatÃ¶r", type: "common", baseValue: 730 },
            { name: "Az KullanÄ±lmÄ±ÅŸ Ã‡adÄ±r", type: "common", baseValue: 477 },
            { name: "Modern SaÃ§ Kurutma Makinesi", type: "common", baseValue: 398 },
            { name: "Garantisiz ParfÃ¼m", type: "common", baseValue: 734 },
            { name: "Deri GÃ¶zlÃ¼k", type: "common", baseValue: 513 },
            { name: "Renkli HoparlÃ¶r", type: "common", baseValue: 198 },
            { name: "Cam Ä°ngiliz AnahtarÄ±", type: "common", baseValue: 440 },
            { name: "Garantisiz Abajur", type: "common", baseValue: 153 },
            { name: "Ã‡in MalÄ± Kilim", type: "common", baseValue: 275 },
            { name: "Cam Kamp Sandalyesi", type: "common", baseValue: 513 },
            { name: "MarkasÄ±z Ã‡adÄ±r", type: "common", baseValue: 488 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda Tost Makinesi", type: "common", baseValue: 743 },
            { name: "Modern Top", type: "common", baseValue: 585 },
            { name: "Garantisiz Avize", type: "common", baseValue: 528 },
            { name: "Temiz Bavul", type: "common", baseValue: 191 },
            { name: "KumaÅŸ Ayna", type: "common", baseValue: 462 },
            { name: "Ä°kinci El Bavul", type: "common", baseValue: 459 },
            { name: "Az KullanÄ±lmÄ±ÅŸ HalÄ±", type: "common", baseValue: 771 },
            { name: "Ä°thal Modem", type: "common", baseValue: 676 },
            { name: "Cam Laptop", type: "common", baseValue: 496 },
            { name: "Modern Avize", type: "common", baseValue: 172 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda Matkap", type: "common", baseValue: 646 },
            { name: "Garantisiz Tornavida Seti", type: "common", baseValue: 364 },
            { name: "Metal Saat", type: "common", baseValue: 702 },
            { name: "Kutusuz IsÄ±tÄ±cÄ±", type: "common", baseValue: 328 },
            { name: "Plastik Tablet", type: "common", baseValue: 718 },
            { name: "AhÅŸap Kamp Sandalyesi", type: "common", baseValue: 504 },
            { name: "AhÅŸap TakÄ± Kutusu", type: "common", baseValue: 311 },
            { name: "Deri Matkap", type: "common", baseValue: 319 },
            { name: "Desenli Mikrodalga", type: "common", baseValue: 437 },
            { name: "Yerli MalÄ± Testere", type: "common", baseValue: 665 },
            { name: "KumaÅŸ Modem (2022)", type: "common", baseValue: 273 },
            { name: "Klasik VantilatÃ¶r", type: "common", baseValue: 550 },
            { name: "Cam SÄ±rt Ã‡antasÄ±", type: "common", baseValue: 360 },
            { name: "Retro Paten", type: "common", baseValue: 223 },
            { name: "Garantisiz Raket (2019)", type: "common", baseValue: 717 },
            { name: "Klasik HalÄ±", type: "common", baseValue: 743 },
            { name: "Vintage Makyaj Seti", type: "common", baseValue: 616 },
            { name: "Deri SaÃ§ Kurutma Makinesi", type: "common", baseValue: 337 },
            { name: "Modern SaÃ§ Kurutma Makinesi (2017)", type: "common", baseValue: 191 },
            { name: "Renkli Kahve Makinesi", type: "common", baseValue: 562 },
            { name: "Metal VantilatÃ¶r", type: "common", baseValue: 533 },
            { name: "Retro Mikser", type: "common", baseValue: 161 },
            { name: "Kutusuz HalÄ±", type: "common", baseValue: 600 },
            { name: "Cam Modem", type: "common", baseValue: 800 },
            { name: "Ã‡in MalÄ± ParfÃ¼m", type: "common", baseValue: 672 },
            { name: "Ä°kinci El Termos", type: "common", baseValue: 695 },
            { name: "Temiz Blender", type: "common", baseValue: 164 },
            { name: "Desenli Tablo", type: "common", baseValue: 585 },
            { name: "Cam Top", type: "common", baseValue: 539 },
            { name: "Retro Blender", type: "common", baseValue: 390 },
            { name: "Retro GÃ¶zlÃ¼k", type: "common", baseValue: 182 },
            { name: "Deri Modem", type: "common", baseValue: 331 },
            { name: "MarkasÄ±z ÃœtÃ¼", type: "common", baseValue: 631 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda Mikser", type: "common", baseValue: 623 },
            { name: "Ã‡in MalÄ± HalÄ±", type: "common", baseValue: 167 },
            { name: "Kutusuz Uyku Tulumu", type: "common", baseValue: 265 },
            { name: "Vintage YazÄ±cÄ±", type: "common", baseValue: 348 },
            { name: "Az KullanÄ±lmÄ±ÅŸ Avize", type: "common", baseValue: 424 },
            { name: "Renkli Mikser", type: "common", baseValue: 414 },
            { name: "Plastik Oyun Konsolu (2014)", type: "common", baseValue: 487 },
            { name: "Az KullanÄ±lmÄ±ÅŸ Ayna", type: "common", baseValue: 624 },
            { name: "Vintage TakÄ± Kutusu", type: "common", baseValue: 194 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda HoparlÃ¶r", type: "common", baseValue: 792 },
            { name: "Garantisiz Olta", type: "common", baseValue: 205 },
            { name: "Metal Kamp Sandalyesi", type: "common", baseValue: 663 },
            { name: "Yerli MalÄ± SÄ±rt Ã‡antasÄ±", type: "common", baseValue: 598 },
            { name: "Ucuz Tost Makinesi (2009)", type: "common", baseValue: 447 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda Modem", type: "common", baseValue: 260 },
            { name: "Ä°thal Ä°ngiliz AnahtarÄ±", type: "common", baseValue: 378 },
            { name: "Modern Olta", type: "common", baseValue: 241 },
            { name: "Yerli MalÄ± Tost Makinesi", type: "common", baseValue: 739 },
            { name: "Desenli Top", type: "common", baseValue: 528 },
            { name: "Klasik Mikser", type: "common", baseValue: 488 },
            { name: "KumaÅŸ Oyun Konsolu", type: "common", baseValue: 313 },
            { name: "Ã‡alÄ±ÅŸÄ±r Durumda Telefon", type: "common", baseValue: 705 },
            { name: "Az KullanÄ±lmÄ±ÅŸ Olta (2020)", type: "common", baseValue: 516 },
            { name: "Az KullanÄ±lmÄ±ÅŸ HoparlÃ¶r", type: "common", baseValue: 585 },
            { name: "Cam ParfÃ¼m", type: "common", baseValue: 407 },
            { name: "Ä°thal Matkap", type: "common", baseValue: 292 },
            { name: "Vintage Tost Makinesi", type: "common", baseValue: 786 },
            { name: "Deri VantilatÃ¶r", type: "common", baseValue: 349 },
            { name: "Metal Laptop", type: "common", baseValue: 751 },
            { name: "Az KullanÄ±lmÄ±ÅŸ ÃœtÃ¼", type: "common", baseValue: 194 },
            { name: "Kutusuz Bavul", type: "common", baseValue: 766 },
            { name: "Plastik Mikser", type: "common", baseValue: 385 },
            { name: "Modern Matkap", type: "common", baseValue: 788 },
            { name: "Vintage ParfÃ¼m (2014)", type: "common", baseValue: 472 },
            { name: "Plastik Paten", type: "common", baseValue: 222 },
            { name: "Kutusuz Bisiklet", type: "common", baseValue: 470 },
            { name: "Desenli Matkap", type: "common", baseValue: 249 },
            { name: "Cam Kilim", type: "common", baseValue: 512 },
            { name: "Ä°kinci El Tablo", type: "common", baseValue: 329 },
            { name: "Temiz Pense", type: "common", baseValue: 646 },
            { name: "Temiz TarayÄ±cÄ±", type: "common", baseValue: 499 },
            { name: "Temiz Kemer", type: "common", baseValue: 704 },
            { name: "Ä°thal Mikrodalga (2008)", type: "common", baseValue: 761 },
            { name: "Az KullanÄ±lmÄ±ÅŸ Radyo", type: "common", baseValue: 247 },
            { name: "Kutusuz SÄ±rt Ã‡antasÄ±", type: "common", baseValue: 169 },
            { name: "Temiz Router", type: "common", baseValue: 475 },
            { name: "Az KullanÄ±lmÄ±ÅŸ Paten", type: "common", baseValue: 505 },
            { name: "Orijinal Ä°mzalÄ± Forma", type: "rare", baseValue: 6772 },
            { name: "Orijinal Teleskop", type: "rare", baseValue: 11770 },
            { name: "SertifikalÄ± Koleksiyonluk Kart", type: "rare", baseValue: 6538 },
            { name: "YÃ¼ksek Kalite ZÃ¼mrÃ¼t TaÃ§", type: "rare", baseValue: 7079 },
            { name: "Profesyonel OsmanlÄ± ParasÄ±", type: "rare", baseValue: 7217 },
            { name: "El YapÄ±mÄ± Safir BroÅŸ", type: "rare", baseValue: 5983 },
            { name: "Nadir Keman", type: "rare", baseValue: 3721 },
            { name: "Ã–zel YapÄ±m VR GÃ¶zlÃ¼k", type: "rare", baseValue: 4675 },
            { name: "Restore EdilmiÅŸ Keman", type: "rare", baseValue: 10834 },
            { name: "YÃ¼ksek Kalite Ä°mzalÄ± Forma", type: "rare", baseValue: 7051 },
            { name: "Ä°mzalÄ± Keman", type: "rare", baseValue: 8800 },
            { name: "Nadir Trompet", type: "rare", baseValue: 6798 },
            { name: "FaturalÄ± El YazmasÄ± Kitap", type: "rare", baseValue: 4152 },
            { name: "Nadir Limited Edition FigÃ¼r", type: "rare", baseValue: 2358 },
            { name: "SÄ±nÄ±rlÄ± SayÄ±da Davul Seti", type: "rare", baseValue: 2973 },
            { name: "Marka Antika Vazo", type: "rare", baseValue: 5732 },
            { name: "Antika AkÄ±llÄ± BuzdolabÄ±", type: "rare", baseValue: 7144 },
            { name: "YÃ¼ksek Kalite DJ Seti", type: "rare", baseValue: 4521 },
            { name: "LÃ¼ks Koleksiyonluk Kart", type: "rare", baseValue: 9917 },
            { name: "Nadir VR GÃ¶zlÃ¼k", type: "rare", baseValue: 6289 },
            { name: "FaturalÄ± Antika Vazo", type: "rare", baseValue: 4002 },
            { name: "MÃ¼kemmel Kondisyonda Ev Sinema Sistemi", type: "rare", baseValue: 13560 },
            { name: "SertifikalÄ± OsmanlÄ± ParasÄ±", type: "rare", baseValue: 10739 },
            { name: "SertifikalÄ± Ä°mzalÄ± Forma", type: "rare", baseValue: 10813 },
            { name: "MÃ¼kemmel Kondisyonda ZÃ¼mrÃ¼t TaÃ§", type: "rare", baseValue: 10408 },
            { name: "Profesyonel AltÄ±n KÃ¼pe", type: "rare", baseValue: 8707 },
            { name: "Orijinal Ä°mzalÄ± Poster", type: "rare", baseValue: 4738 },
            { name: "FaturalÄ± Elektro Gitar", type: "rare", baseValue: 2537 },
            { name: "FaturalÄ± Mikroskop", type: "rare", baseValue: 6471 },
            { name: "MÃ¼kemmel Kondisyonda Elektro Gitar", type: "rare", baseValue: 4197 },
            { name: "LÃ¼ks Oyuncu KoltuÄŸu", type: "rare", baseValue: 14452 },
            { name: "Profesyonel ZÃ¼mrÃ¼t TaÃ§", type: "rare", baseValue: 10655 },
            { name: "SÄ±nÄ±rlÄ± SayÄ±da VR GÃ¶zlÃ¼k", type: "rare", baseValue: 6093 },
            { name: "Profesyonel Ä°nci Bileklik", type: "rare", baseValue: 7553 },
            { name: "YÃ¼ksek Kalite Ä°nci Bileklik", type: "rare", baseValue: 9338 },
            { name: "Antika 3D YazÄ±cÄ±", type: "rare", baseValue: 10183 },
            { name: "Ä°mzalÄ± DÃ¼rbÃ¼n", type: "rare", baseValue: 3533 },
            { name: "Nadir DÃ¼rbÃ¼n", type: "rare", baseValue: 9588 },
            { name: "Restore EdilmiÅŸ YarÄ±ÅŸ SimÃ¼latÃ¶rÃ¼", type: "rare", baseValue: 7378 },
            { name: "Restore EdilmiÅŸ AltÄ±n KÃ¼pe", type: "rare", baseValue: 2633 },
            { name: "YÃ¼ksek Kalite AkÄ±llÄ± Saat", type: "rare", baseValue: 7260 },
            { name: "Kutulu Roma Sikkesi", type: "rare", baseValue: 13548 },
            { name: "Ã–zel YapÄ±m Yakut GerdanlÄ±k", type: "rare", baseValue: 3582 },
            { name: "YÃ¼ksek Kalite Lazer Kesici", type: "rare", baseValue: 5022 },
            { name: "TasarÄ±m Safir BroÅŸ", type: "rare", baseValue: 8842 },
            { name: "Ã–zel YapÄ±m AkÄ±llÄ± BuzdolabÄ±", type: "rare", baseValue: 9401 },
            { name: "Nadir 4K ProjektÃ¶r", type: "rare", baseValue: 3085 },
            { name: "Restore EdilmiÅŸ Teleskop", type: "rare", baseValue: 12161 },
            { name: "SertifikalÄ± PÄ±rlanta YÃ¼zÃ¼k", type: "rare", baseValue: 3620 },
            { name: "YÃ¼ksek Kalite Ä°mzalÄ± Poster", type: "rare", baseValue: 12616 },
            { name: "TasarÄ±m Ä°mzalÄ± Plak", type: "rare", baseValue: 4807 },
            { name: "Marka Limited Edition FigÃ¼r", type: "rare", baseValue: 3947 },
            { name: "TasarÄ±m AkÄ±llÄ± BuzdolabÄ±", type: "rare", baseValue: 6066 },
            { name: "Orijinal StÃ¼dyo Mikrofonu", type: "rare", baseValue: 12252 },
            { name: "El YapÄ±mÄ± Ä°mzalÄ± Forma", type: "rare", baseValue: 7725 },
            { name: "Ä°mzalÄ± AkÄ±llÄ± BuzdolabÄ±", type: "rare", baseValue: 13455 },
            { name: "Profesyonel AkÄ±llÄ± Saat", type: "rare", baseValue: 9743 },
            { name: "Kutulu 3D YazÄ±cÄ±", type: "rare", baseValue: 14169 },
            { name: "TasarÄ±m Koleksiyonluk Kart", type: "rare", baseValue: 11234 },
            { name: "Restore EdilmiÅŸ Trompet", type: "rare", baseValue: 7030 },
            { name: "SertifikalÄ± Saksafon", type: "rare", baseValue: 14650 },
            { name: "Nadir Safir BroÅŸ", type: "rare", baseValue: 9033 },
            { name: "TasarÄ±m 4K ProjektÃ¶r", type: "rare", baseValue: 10023 },
            { name: "Koleksiyonluk FotoÄŸraf Makinesi Lensi", type: "rare", baseValue: 8728 },
            { name: "Orijinal Roma Sikkesi", type: "rare", baseValue: 11587 },
            { name: "Nadir Bizans MozaiÄŸi", type: "rare", baseValue: 12764 },
            { name: "Nadir Drone", type: "rare", baseValue: 6013 },
            { name: "FaturalÄ± Ä°nci Bileklik", type: "rare", baseValue: 3735 },
            { name: "Nadir Piyano", type: "rare", baseValue: 13552 },
            { name: "SertifikalÄ± Robot SÃ¼pÃ¼rge", type: "rare", baseValue: 4734 },
            { name: "MÃ¼kemmel Kondisyonda El YazmasÄ± Kitap", type: "rare", baseValue: 8294 },
            { name: "Ã–zel YapÄ±m Koleksiyonluk Kart", type: "rare", baseValue: 10856 },
            { name: "SertifikalÄ± DJ Seti", type: "rare", baseValue: 8348 },
            { name: "FaturalÄ± Keman", type: "rare", baseValue: 14788 },
            { name: "Koleksiyonluk DÃ¼rbÃ¼n", type: "rare", baseValue: 12345 },
            { name: "MÃ¼kemmel Kondisyonda Roma Sikkesi", type: "rare", baseValue: 13111 },
            { name: "LÃ¼ks Ä°nci Bileklik", type: "rare", baseValue: 2193 },
            { name: "Nadir Koleksiyonluk Kart", type: "rare", baseValue: 12744 },
            { name: "Koleksiyonluk GÃ¼mÃ¼ÅŸ Kolye", type: "rare", baseValue: 14628 },
            { name: "Ã–zel YapÄ±m Elektro Gitar", type: "rare", baseValue: 5273 },
            { name: "El YapÄ±mÄ± Ä°mzalÄ± Plak", type: "rare", baseValue: 8774 },
            { name: "Nadir FotoÄŸraf Makinesi Lensi", type: "rare", baseValue: 9151 },
            { name: "LÃ¼ks Trompet", type: "rare", baseValue: 3953 },
            { name: "Ã–zel YapÄ±m Robot SÃ¼pÃ¼rge", type: "rare", baseValue: 3199 },
            { name: "Nadir Ä°mzalÄ± Poster", type: "rare", baseValue: 5969 },
            { name: "El YapÄ±mÄ± FotoÄŸraf Makinesi Lensi", type: "rare", baseValue: 12436 },
            { name: "SÄ±nÄ±rlÄ± SayÄ±da AkÄ±llÄ± BuzdolabÄ±", type: "rare", baseValue: 9659 },
            { name: "SÄ±nÄ±rlÄ± SayÄ±da Ev Sinema Sistemi", type: "rare", baseValue: 6678 },
            { name: "El YapÄ±mÄ± VR GÃ¶zlÃ¼k", type: "rare", baseValue: 2796 },
            { name: "Restore EdilmiÅŸ OsmanlÄ± ParasÄ±", type: "rare", baseValue: 7851 },
            { name: "LÃ¼ks DÃ¼rbÃ¼n", type: "rare", baseValue: 13183 },
            { name: "Restore EdilmiÅŸ Lazer Kesici", type: "rare", baseValue: 6982 },
            { name: "Restore EdilmiÅŸ PÄ±rlanta YÃ¼zÃ¼k", type: "rare", baseValue: 13245 },
            { name: "Orijinal Antika Vazo", type: "rare", baseValue: 6236 },
            { name: "Kutulu Mikroskop", type: "rare", baseValue: 3855 },
            { name: "Restore EdilmiÅŸ DÃ¼rbÃ¼n", type: "rare", baseValue: 12253 },
            { name: "Orijinal Limited Edition FigÃ¼r", type: "rare", baseValue: 11910 },
            { name: "Profesyonel Safir BroÅŸ", type: "rare", baseValue: 5878 },
            { name: "LÃ¼ks Roma Sikkesi", type: "rare", baseValue: 8389 },
            { name: "SÄ±nÄ±rlÄ± SayÄ±da Saksafon", type: "rare", baseValue: 8141 },
            { name: "MÃ¼zelik Ay TaÅŸÄ±", type: "legendary", baseValue: 155786 },
            { name: "KayÄ±p Hazineden Uzay MekiÄŸi ParÃ§asÄ±", type: "legendary", baseValue: 37365 },
            { name: "DÃ¼nya DÄ±ÅŸÄ± Kripto DonanÄ±m CÃ¼zdanÄ± (BTC Dolu)", type: "legendary", baseValue: 60550 },
            { name: "UzaylÄ± Apple I Bilgisayar", type: "legendary", baseValue: 87240 },
            { name: "MÃ¼zelik Ä°lk BasÄ±m Superman Ã‡izgi RomanÄ±", type: "legendary", baseValue: 169821 },
            { name: "Gizemli Mars TaÅŸÄ±", type: "legendary", baseValue: 183916 },
            { name: "Gelecekten Kral TacÄ±", type: "legendary", baseValue: 36184 },
            { name: "Gizemli Kral TacÄ±", type: "legendary", baseValue: 59249 },
            { name: "Kutsal Kral TacÄ±", type: "legendary", baseValue: 174832 },
            { name: "UzaylÄ± KraliÃ§e AsasÄ±", type: "legendary", baseValue: 131197 },
            { name: "Efsanevi Zaman Makinesi ParÃ§asÄ±", type: "legendary", baseValue: 178746 },
            { name: "BÃ¼yÃ¼lÃ¼ IÅŸÄ±n KÄ±lÄ±cÄ± (Replika DeÄŸil)", type: "legendary", baseValue: 181124 },
            { name: "KayÄ±p Hazineden Kuantum Ä°ÅŸlemci ParÃ§asÄ±", type: "legendary", baseValue: 199769 },
            { name: "Lanetli Mamut DiÅŸi", type: "legendary", baseValue: 86276 },
            { name: "Gelecekten Viking BaltasÄ±", type: "legendary", baseValue: 198061 },
            { name: "Gelecekten KraliÃ§e AsasÄ±", type: "legendary", baseValue: 57474 },
            { name: "Paha BiÃ§ilemez Zaman Makinesi ParÃ§asÄ±", type: "legendary", baseValue: 172260 },
            { name: "Kutsal Meteor", type: "legendary", baseValue: 35315 },
            { name: "YasaklÄ± Mars TaÅŸÄ±", type: "legendary", baseValue: 44949 },
            { name: "Gizemli Mozart Bestesi", type: "legendary", baseValue: 172069 },
            { name: "BÃ¼yÃ¼lÃ¼ Mars TaÅŸÄ±", type: "legendary", baseValue: 172010 },
            { name: "BÃ¼yÃ¼lÃ¼ Firavun Kolyesi", type: "legendary", baseValue: 55136 },
            { name: "BÃ¼yÃ¼lÃ¼ Van Gogh Eskizi", type: "legendary", baseValue: 128736 },
            { name: "Gizemli Mamut DiÅŸi", type: "legendary", baseValue: 31736 },
            { name: "Gizli Kuantum Ä°ÅŸlemci ParÃ§asÄ±", type: "legendary", baseValue: 105079 },
            { name: "Kutsal IÅŸÄ±n KÄ±lÄ±cÄ± (Replika DeÄŸil)", type: "legendary", baseValue: 53109 },
            { name: "Tarihi IÅŸÄ±n KÄ±lÄ±cÄ± (Replika DeÄŸil)", type: "legendary", baseValue: 87081 },
            { name: "BÃ¼yÃ¼lÃ¼ ÅÃ¶valye ZÄ±rhÄ±", type: "legendary", baseValue: 55020 },
            { name: "Tarihi Firavun Kolyesi", type: "legendary", baseValue: 103279 },
            { name: "Kutsal UzaylÄ± Teknolojisi", type: "legendary", baseValue: 104164 },
            { name: "KayÄ±p Hazineden Dinozor KemiÄŸi", type: "legendary", baseValue: 148610 },
            { name: "Efsanevi ÅÃ¶valye ZÄ±rhÄ±", type: "legendary", baseValue: 136057 },
            { name: "Efsanevi KraliÃ§e AsasÄ±", type: "legendary", baseValue: 66963 },
            { name: "UzaylÄ± Yapay Zeka Sunucusu", type: "legendary", baseValue: 159697 },
            { name: "BÃ¼yÃ¼lÃ¼ Uzay MekiÄŸi ParÃ§asÄ±", type: "legendary", baseValue: 97461 },
            { name: "KayÄ±p Hazineden ÅÃ¶valye ZÄ±rhÄ±", type: "legendary", baseValue: 60405 },
            { name: "Gizemli Meteor", type: "legendary", baseValue: 91281 },
            { name: "Efsanevi Kuantum Ä°ÅŸlemci ParÃ§asÄ±", type: "legendary", baseValue: 149836 },
            { name: "UzaylÄ± Einstein NotlarÄ±", type: "legendary", baseValue: 60547 },
            { name: "Gizli NÃ¼kleer Pil", type: "legendary", baseValue: 189545 },
            { name: "Gizemli IÅŸÄ±n KÄ±lÄ±cÄ± (Replika DeÄŸil)", type: "legendary", baseValue: 47903 },
            { name: "YasaklÄ± Dinozor KemiÄŸi", type: "legendary", baseValue: 40986 },
            { name: "Kutsal Tesla Bobini (Orijinal)", type: "legendary", baseValue: 144399 },
            { name: "YasaklÄ± Kuantum Ä°ÅŸlemci ParÃ§asÄ±", type: "legendary", baseValue: 179662 },
            { name: "Paha BiÃ§ilemez Picasso Tablosu", type: "legendary", baseValue: 87099 },
            { name: "YasaklÄ± Zaman Makinesi ParÃ§asÄ±", type: "legendary", baseValue: 143302 },
            { name: "Paha BiÃ§ilemez Einstein NotlarÄ±", type: "legendary", baseValue: 38678 },
            { name: "BÃ¼yÃ¼lÃ¼ Ay TaÅŸÄ±", type: "legendary", baseValue: 47131 },
            { name: "Gelecekten Kuantum Ä°ÅŸlemci ParÃ§asÄ±", type: "legendary", baseValue: 123012 },
            { name: "MÃ¼zelik UzaylÄ± Teknolojisi", type: "legendary", baseValue: 90286 },
        ];

        // --- OPPONENTS ---
        const OPPONENTS = [
            { id: 'yilong', name: 'Yilong Ma', avatar: 'ğŸš€', wealth: 999999, aggressive: 0.9, patience: 2, desc: 'Teknoloji Milyarderi', color: '#00d2d3' },
            { id: 'hasan', name: 'HurdacÄ± Hasan', avatar: 'ğŸ§¢', wealth: 5000, aggressive: 0.3, patience: 5, desc: 'Eski Toprak', color: '#ff9f43' },
            { id: 'daniel', name: 'Jew Daniel', avatar: 'ğŸ’', wealth: 50000, aggressive: 0.7, patience: 4, desc: 'Kuyumcu', color: '#feca57' },
            { id: 'cilem', name: 'Bitmeyen Ã‡ilem', avatar: 'ğŸš¬', wealth: 2000, aggressive: 0.1, patience: 1, desc: 'ÅanssÄ±z', color: '#ff6b6b' }
        ];

        const OPPONENT_LINES = {
            yilong: {
                bid: [
                    "To the moon! ğŸš€",
                    "è¿™æ˜¯æˆ‘çš„!",  // (This is mine!)
                    "Buying this for Mars colony.",
                    "æˆ‘è¦è¿™ä¸ª!",  // (I want this!)
                    "Paying with Doge.",
                    "Technology is the future!",
                    "å¤ªå¥½äº†!"     // (Great!)
                ],
                fold: [
                    "ä¸!",        // (No!)
                    "Boring.",
                    "Paper hands...",
                    "æ²¡æœ‰æ„æ€.",   // (Boring/Not interesting)
                    "Waiting for the dip."
                ],
                random: [
                    "ä½ å¥½å—?",     // (How are you?)
                    "When Lambo?",
                    "My rocket is ready.",
                    "æˆ‘ä»¬å»ç«æ˜Ÿ!", // (Let's go to Mars!)
                    "420.69 is the magic number."
                ]
            },
            hasan: {
                bid: [
                    "PaslÄ± maslÄ± ama iÅŸ gÃ¶rÃ¼r.",
                    "HurdasÄ± para eder bunun.",
                    "AtÄ±n Ã¶lÃ¼mÃ¼ arpadan olsun.",
                    "Aman, demiri iyi duruyor.",
                    "ÃœÃ§ beÅŸ bir ÅŸey ateÅŸleriz."
                ],
                fold: [
                    "O paraya kamyon alÄ±rÄ±m be!",
                    "Soygun var polis!",
                    "Hadi ordan, teneke bu.",
                    "Kurtarmaz yeÄŸenim, kurtarmaz.",
                    "Bu fiyata hurda alÄ±nmaz."
                ],
                random: [
                    "Eskiciiiii!",
                    "Demir fiyatlarÄ± dÃ¼ÅŸtÃ¼ mÃ¼?",
                    "Ã‡ay sÃ¶yleyin de iÃ§elim.",
                    "Bizim oÄŸlanÄ± sanayiye verdim.",
                    "Eski devir kalmadÄ± azizim."
                ]
            },
            daniel: {
                bid: [
                    "A fair price... barely.",
                    "I smell a profit margin here.",
                    "Mazel tov! I'm in.",
                    "With a little polish, I can flip this.",
                    "Such a deal, I'd be meshuga to pass.",
                    "Good business is where you find it."
                ],
                fold: [
                    "Oy vey! Look at that price!",
                    "You are robbing me blind!",
                    "Where is the profit? Nowhere!",
                    "Too rich for my blood.",
                    "Such chutzpah asking for this much!",
                    "I'm out. My mother raised no fool."
                ],
                random: [
                    "Time is money, friend.",
                    "You call this a storage unit?",
                    "I know a guy who knows a guy...",
                    "Buy wholesale, sell retail. Simple.",
                    "Nu? Are we bidding or staring?"
                ]
            },
            cilem: {
                bid: [
                    "Ã‡oluk Ã§ocuÄŸun rÄ±zkÄ±nÄ± basÄ±yorum...",
                    "Ah, yine piÅŸman olacaÄŸÄ±m.",
                    "Son kuruÅŸumla...",
                    "Belki bu sefer yÃ¼zÃ¼m gÃ¼ler?",
                    "Buna da girelim bakalÄ±m, ne Ã§Ä±karsa..."
                ],
                fold: [
                    "Biliyordum... Hep bÃ¶yle olur.",
                    "Zaten ÅŸansÄ±m yok.",
                    "Kaderimse Ã§ekerim.",
                    "Bu dÃ¼nya bana dar.",
                    "Yine kaybettim, alÄ±ÅŸÄ±ÄŸÄ±m.",
                    "Param yetmez ki..."
                ],
                random: [
                    "BaÅŸÄ±ma giren aÄŸrÄ±lar...",
                    "Kesin boÅŸ Ã§Ä±kacak, hissediyorum.",
                    "Neden doÄŸdum ki?",
                    "AkÅŸam eve ne gÃ¶tÃ¼receÄŸim?",
                    "Off off... YÃ¼zÃ¼mÃ¼z gÃ¼lmedi."
                ]
            }
        };

        // --- SKILLS CONFIGURATION ---
        const SKILLS_CONFIG = {
            xray: {
                id: 'xray',
                name: 'RÃ¶ntgen GÃ¶zler',
                maxLevel: 3,
                cost: 1,
                desc: 'KutularÄ±n riskini daha iyi analiz etme ÅŸansÄ± saÄŸlar.'
            },
            silverTongue: {
                id: 'silverTongue',
                name: 'TatlÄ± Dil',
                maxLevel: 3,
                cost: 1,
                desc: 'PazarlÄ±kta EO\'nun sabrÄ±nÄ± daha az tÃ¼ketirsin.'
            },
            restorer: {
                id: 'restorer',
                name: 'Usta Tamirci',
                maxLevel: 5,
                cost: 1,
                desc: 'AtÃ¶lyede hurda eÅŸyalarÄ± onarma ÅŸansÄ±nÄ± artÄ±rÄ±r.'
            },
            hoarder: {
                id: 'hoarder',
                name: 'Ä°stifÃ§i',
                maxLevel: 5,
                cost: 1,
                desc: 'Depo kapasitesini kalÄ±cÄ± olarak +5 artÄ±rÄ±r.'
            }
        };

        // --- EO INTELLIGENCE ---
        const EO_AI = {
            mood: 'neutral', // neutral, happy, annoyed, angry
            patience: 3, // Lowers with bad offers

            dialogue: {
                greeting: {
                    friendly: [
                        "Ooo, benim favori tÃ¼ccarÄ±m gelmiÅŸ! Yine mi beni batÄ±rmaya Ã§alÄ±ÅŸacaksÄ±n, yoksa bu sefer gerÃ§ekten iÅŸe yarar bir ÅŸeyin var mÄ±?",
                        "HoÅŸ geldin dostum! BakalÄ±m bugÃ¼n hangi 'ÅŸahane' mallarÄ± itelemeye Ã§alÄ±ÅŸacaksÄ±n?",
                        "GÃ¶zÃ¼m yollarda kaldÄ±. Hadi gÃ¶ster bakalÄ±m, bugÃ¼n beni nasÄ±l kandÄ±racaksÄ±n?",
                        "Ah, en sevdiÄŸim para kaynaÄŸÄ±m... Ã¶hÃ¶m, iÅŸ ortaÄŸÄ±m geldi!",
                        "Seni gÃ¶rmek ne gÃ¼zel! CÃ¼zdanÄ±m titremeye baÅŸladÄ± bile.",
                        "Gel bakalÄ±m dahi Ã§ocuk. BugÃ¼n hangi Ã§Ã¶pleri altÄ±n diye yutturacaksÄ±n?",
                        "Sensiz dÃ¼kkanÄ±n tadÄ± tuzu yoktu. Cidden, kimseyle bu kadar eÄŸlenceli pazarlÄ±k yapamÄ±yorum.",
                        "Vay vay vay! Kimler gelmiÅŸ. BugÃ¼n beni ne kadar zarara sokmayÄ± planlÄ±yorsun?",
                        "CanÄ±m ciÄŸerim, gel otur. Ã‡ay sÃ¶yleyeyim mi? Tabi parasÄ±nÄ± Ã¶dersen.",
                        "Yine mi sen? Åaka ÅŸaka, baÅŸÄ±mÄ±n tacÄ±sÄ±n (ÅŸimdilik).",
                        "Ä°Ã§eri gÃ¼neÅŸ doÄŸdu sandÄ±m, meÄŸer senmiÅŸsin. Ya da cebindeki parlak hurdalar.",
                        "HoÅŸ geldin ÅŸampiyon. BakalÄ±m formunda mÄ±sÄ±n?",
                        "Seni bekliyordum. Kasada biraz fazlalÄ±k vardÄ±, alÄ±rsÄ±n sandÄ±m.",
                        "GÃ¶zlerim yaÅŸardÄ±, duygulandÄ±m bak. Hadi sadede gel.",
                        "MÃ¼kemmel zamanlama. Tam da canÄ±m sÄ±kÄ±lÄ±yordu, biri gelse de kazÄ±klasam diyordum."
                    ],
                    neutral: [
                        "HoÅŸ geldin. BakalÄ±m bugÃ¼n ne getirdin.",
                        "UmarÄ±m vakit harcamaya deÄŸecek ÅŸeyler vardÄ±r.",
                        "DÃ¼kkan aÃ§Ä±k, ama sabrÄ±m sÄ±nÄ±rlÄ±. GÃ¶ster bakalÄ±m.",
                        "Ä°ÅŸler nasÄ±l? Getirdiklerin iÅŸ yaparsa konuÅŸuruz.",
                        "Yine ne buldun? UmarÄ±m geÃ§en seferki gibi deÄŸildir.",
                        "Merhaba. HÄ±zlÄ± olalÄ±m, iÅŸim var.",
                        "BakÄ±yorum yine ellerin dolu. Ä°ÅŸe yarar bir ÅŸey var mÄ±?",
                        "Selam. BugÃ¼n piyasa durgun, beklentini yÃ¼ksek tutma.",
                        "SÄ±radaki! Ha, senmiÅŸsin. Ne var elinde?",
                        "Para kazanmak istiyorsan doÄŸru yerdesin, ama kolay deÄŸil.",
                        "Hadi bakalÄ±m, tezgaha dÃ¶kÃ¼lsÃ¼n mallar.",
                        "Vaktim nakittir dostum. Ä°kisini de harcama.",
                        "Seni hatÄ±rlÄ±yorum. UmarÄ±m bu sefer daha iyi ÅŸeyler vardÄ±r."
                    ],
                    suspicious: [
                        "Yine mi sen? Ã‡abuk ol, fazla vaktim yok.",
                        "Sadece bakÄ±yorum, sÃ¶z vermem. ÅÃ¼pheli bir ÅŸey gÃ¶rÃ¼rsem polisi ararÄ±m.",
                        "KapÄ±dan girmeden Ã¶nce ayakkabÄ±larÄ±nÄ± sildin mi? Ne istiyorsun?",
                        "GÃ¶zÃ¼m Ã¼zerinde. YanlÄ±ÅŸ bir hareket yapma.",
                        "Buralarda fazla dolaÅŸma, malÄ±na bakÄ±p yollarÄ±m.",
                        "Seninle iÅŸ yapmak riskli. MalÄ±n temiz mi?",
                        "Polisler seni sordu geÃ§en gÃ¼n. Åaka ÅŸaka... belki de deÄŸildir.",
                        "Acelem var, ne satacaksan sat ve git.",
                        "DÃ¼kkanÄ±mda hÄ±rsÄ±zlÄ±k malÄ± istemiyorum, baÅŸtan anlaÅŸalÄ±m.",
                        "Tipini hiÃ§ gÃ¶zÃ¼m tutmadÄ± ama neyse. GÃ¶ster.",
                        "Sana gÃ¼venmiyorum ama parana gÃ¼venirim. Belki.",
                        "ArkamÄ± dÃ¶ndÃ¼ÄŸÃ¼mde bir ÅŸey Ã§alma sakÄ±n.",
                        "Senin gibileri iyi tanÄ±rÄ±m. Beni kandÄ±ramazsÄ±n."
                    ]
                },
                inspecting: {
                    friendly: [
                        "BakalÄ±m bugÃ¼n hangi hazineyi buldun?",
                        "Bunu benim iÃ§in mi sakladÄ±n? Hadi gÃ¶relim.",
                        "GÃ¼zel bir ÅŸeye benziyor, anlat bakalÄ±m.",
                        "Vay, bu sefer gerÃ§ekten ilginÃ§ bir ÅŸeye benziyor. (Yalan sÃ¶ylÃ¼yor)",
                        "Hadi ÅŸaÅŸÄ±rt beni. BugÃ¼n bonkÃ¶r gÃ¼nÃ¼mdeyim.",
                        "Bunu nereden buldun? Yoksa yine Ã§Ã¶plÃ¼k mÃ¼ karÄ±ÅŸtÄ±rdÄ±n?",
                        "Eline yakÄ±ÅŸmÄ±ÅŸ. Ama benim dÃ¼kkanÄ±ma daha Ã§ok yakÄ±ÅŸÄ±r.",
                        "Hmm, parÄ±ltÄ±sÄ± gÃ¶zÃ¼mÃ¼ aldÄ±. Sahte deÄŸil dimi?",
                        "Anlat bakalÄ±m hikayesini. Ä°nanmÄ±ÅŸ gibi yaparÄ±m.",
                        "Bunu satmaya kÄ±yamazsÄ±n sandÄ±m. Demek parayÄ± daha Ã§ok seviyorsun.",
                        "Ä°lginÃ§ seÃ§im. Senin zevkine... saygÄ± duymaya Ã§alÄ±ÅŸÄ±yorum."
                    ],
                    neutral: [
                        "HÄ±mm... Åuna bir bakalÄ±m.",
                        "Bunun ne olduÄŸunu bildiÄŸine emin misin?",
                        "Ä°lginÃ§... ama satÄ±lÄ±r mÄ± emin deÄŸilim.",
                        "Pek aradÄ±ÄŸÄ±m bir ÅŸey deÄŸil ama inceleyelim.",
                        "Durumu idare eder. Ne kadar istiyorsun?",
                        "Bunun piyasasÄ± dÃ¼ÅŸtÃ¼ ama neyse.",
                        "Biraz yÄ±pranmÄ±ÅŸ sanki. BakalÄ±m Ã§alÄ±ÅŸÄ±yor mu?",
                        "Standart bir parÃ§a. Fazla heyecanlanma.",
                        "Bundan elimde Ã§ok var ama bir tane daha alabilirim.",
                        "Daha temizini bulamadÄ±n mÄ±?",
                        "Fena deÄŸil. GÃ¶relim bakalÄ±m."
                    ],
                    suspicious: [
                        "Ceplerini boÅŸalt. Bu ne?",
                        "Ã‡alÄ±ntÄ± mal almÄ±yorum, baÅŸtan sÃ¶yleyeyim.",
                        "HÄ±zlÄ± ol, buna deÄŸer mi?",
                        "Bunun seri numarasÄ± silinmiÅŸ mi? Kontrol etmem lazÄ±m.",
                        "Bu ne biÃ§im ÅŸey? Ã‡Ã¶pten mi Ã§Ä±kardÄ±n?",
                        "Buna para vereceÄŸimi sanÄ±yorsan yanÄ±lÄ±yorsun.",
                        "Bunu kimden Ã§aldÄ±n? DoÄŸruyu sÃ¶yle.",
                        "Ã‡ok hasarlÄ±. Buna para baÄŸlamam zor.",
                        "Riskli mal. BaÅŸÄ±mÄ± belaya sokma.",
                        "Bunu almak iÃ§in deli olmam lazÄ±m. Ä°kna et beni.",
                        "GerÃ§ek olduÄŸuna emin misin? Sahte gibi duruyor."
                    ]
                },
                lowball: {
                    friendly: [
                        "Yapma ÅŸimdi, dostuz diye kazÄ±klayacak mÄ±sÄ±n beni?",
                        "Seni severim ama cÃ¼zdanÄ±mÄ± daha Ã§ok severim. Fiyat bu.",
                        "Hadi ama, bu fiyata bana ver, hatÄ±rÄ±m kalÄ±r.",
                        "Beni kÄ±rma, gel ÅŸu fiyatta anlaÅŸalÄ±m. ÃœzÃ¼lÃ¼rÃ¼m bak.",
                        "Senin iÃ§in Ã¶zel fiyatÄ±m bu. BaÅŸkasÄ± olsa kapÄ±dan kovardÄ±m.",
                        "AramÄ±zdaki hukuka dayanarak bu fiyatÄ± veriyorum.",
                        "Dost acÄ± sÃ¶yler, bu mal bu kadar etmez. Gel anlaÅŸalÄ±m.",
                        "Sana kÄ±yak geÃ§iyorum, bu fiyatÄ± kaÃ§Ä±rma.",
                        "Bak, baÅŸkasÄ±na gitme, seni Ã¼zerler. Ben insaflÄ±yÄ±m.",
                        "GÃ¼zel hatÄ±rÄ±n iÃ§in biraz daha Ã§Ä±ktÄ±m ama o kadar.",
                        "Seni zengin etmek isterdim ama Ã¶nce ben zengin olmalÄ±yÄ±m."
                    ],
                    neutral: [
                        "Buna en fazla bu kadar veririm. Ä°ÅŸine gelirse.",
                        "Bak, bu piyasada bundan fazlasÄ±nÄ± bulamazsÄ±n.",
                        "Piyasa durgun, teklifim bu.",
                        "Kar marjÄ±m dÃ¼ÅŸÃ¼k, seni kurtarmazsa anlarÄ±m.",
                        "Son teklifim deÄŸil ama yakÄ±n. Ne diyorsun?",
                        "Bunu satmak zor, risk alÄ±yorum. FiyatÄ±m makul.",
                        "Ä°nternette daha ucuza var, ona gÃ¶re.",
                        "Daha fazlasÄ±nÄ± veremem, patron kÄ±zar. (Patron benim)",
                        "Bu fiyat adil. Abartma.",
                        "Nakip para veriyorum, bu devirde zor bulunur.",
                        "Al gÃ¼lÃ¼m ver gÃ¼lÃ¼m. UzatmayalÄ±m."
                    ],
                    suspicious: [
                        "Bu hurdaya bu fiyat Ã§ok bile. Al ya da git.",
                        "Bunu baÅŸkasÄ±na satamazsÄ±n, dua et ben alÄ±yorum.",
                        "Sana bir iyilik yapÄ±p bu parayÄ± veriyorum, uzatma.",
                        "Bu fiyata bulduÄŸuna ÅŸÃ¼kret.",
                        "Daha fazla etmez. Ã‡Ã¶pe atsan kimse almaz.",
                        "Beni yorma, ya sat ya git.",
                        "Sadaka niyetine bu fiyatÄ± veriyorum.",
                        "Risk primi kesiyorum. Fiyat bu.",
                        "BeÄŸenmiyorsan kapÄ± orada.",
                        "Seninle pazarlÄ±k yapÄ±lmaz. Teklifim bu.",
                        "ZamanÄ±mÄ± harcÄ±yorsun. Karar ver."
                    ]
                },
                accept: {
                    friendly: [
                        "Hah ÅŸÃ¶yle! Seninle iÅŸ yapmayÄ± bu yÃ¼zden seviyorum.",
                        "GÃ¼zel anlaÅŸma. Bir kahve de Ä±smarlayayÄ±m mÄ±? Åaka ÅŸaka, git hadi.",
                        "TamamdÄ±r dostum, hayrÄ±nÄ± gÃ¶r.",
                        "HarikasÄ±n! Yine beklerim, cÃ¼zdanÄ±n dolu gel.",
                        "Ä°ÅŸte ticaret budur! Seni seviyorum (paramÄ± sevdiÄŸim kadar).",
                        "AnlaÅŸtÄ±k ortak. Bir dahakine daha iyisini getir.",
                        "GÃ¼zel iÅŸ. Hadi git de paranÄ± ez.",
                        "AkÄ±llÄ±ca bir karar. Benim iÃ§in tabi.",
                        "Seninle anlaÅŸmak bir zevk. Cidden.",
                        "TamamdÄ±r. ParayÄ± saymadan cebine koyma.",
                        "GÃ¶rÃ¼ÅŸÃ¼rÃ¼z cnm. Kendine (ve parama) iyi bak."
                    ],
                    neutral: [
                        "TamamdÄ±r, anlaÅŸtÄ±k.",
                        "Makul. Al paranÄ±.",
                        "GÃ¼zel, ver bakalÄ±m.",
                        "HayÄ±rlÄ± olsun. BaÅŸka?",
                        "Tamam, sarÄ±yorum.",
                        "AnlaÅŸtÄ±k. GÃ¼le gÃ¼le harca.",
                        "Ä°yi satÄ±ÅŸ. Memnun oldum.",
                        "Tamam, kasaya geÃ§elim.",
                        "Oldu bu iÅŸ. SÄ±radaki?",
                        "Makul bir fiyatta buluÅŸtuk.",
                        "TamamdÄ±r."
                    ],
                    suspicious: [
                        "Al paranÄ± ve kaybol.",
                        "Sonunda. Bir daha bÃ¶yle pazarlÄ±k yapma.",
                        "Tamam, ÅŸimdi git dÃ¼kkanÄ±mdan.",
                        "AldÄ±m gitti. Ã‡Ä±k dÄ±ÅŸarÄ±.",
                        "UzatmadÄ±ÄŸÄ±n iÃ§in ÅŸanslÄ±sÄ±n. Tamam.",
                        "Paran burada. Bir daha gÃ¶zÃ¼me gÃ¶rÃ¼nme (yarÄ±na kadar).",
                        "Tamam, defol.",
                        "Zor bela anlaÅŸtÄ±k. Git artÄ±k.",
                        "Tamam, aldÄ±m. Arkana bakmadan yÃ¼rÃ¼.",
                        "Lanet olsun tamam. Ver ÅŸunu.",
                        "Bitti. Git."
                    ]
                },
                reject: {
                    friendly: [
                        "ÅakacÄ± seni! Ama cidden, olmaz.",
                        "Beni gÃ¼ldÃ¼rdÃ¼n, ama o fiyata imkansÄ±z dostum.",
                        "Yok artÄ±k, o fiyata dÃ¼kkanÄ± da vereyim mi?",
                        "Hayaller dÃ¼nyasÄ±nda yaÅŸÄ±yorsun canÄ±m. Ä°necek misin?",
                        "O fiyata ben bile satamam. GerÃ§ekÃ§i ol.",
                        "Kalbimi kÄ±rÄ±yorsun. Bu kadar aÃ§gÃ¶zlÃ¼ olma.",
                        "Hadi ama, dalga geÃ§meyi bÄ±rak.",
                        "O rakamÄ± duymamÄ±ÅŸ olayÄ±m. DostluÄŸumuz bozulmasÄ±n.",
                        "Ã‡ok uÃ§tun ÅŸampiyon. Yere gel.",
                        "Beni soyup soÄŸana Ã§evirmek mi istiyorsun? AyÄ±p.",
                        "O fiyata ancak rÃ¼yanda satarsÄ±n."
                    ],
                    neutral: [
                        "Dalga mÄ± geÃ§iyorsun? Git iÅŸine.",
                        "Bu fiyatla ancak kendini kandÄ±rÄ±rsÄ±n.",
                        "Benimle oyun oynama evlat.",
                        "Ã‡ok yÃ¼ksek. Ä°lgilenmiyorum.",
                        "Bu fiyata alÄ±cÄ± bulamazsÄ±n.",
                        "Ciddi olalÄ±m. Bu rakam komik.",
                        "HayÄ±r, o kadar Ã§Ä±kamam.",
                        "Piyasa bu deÄŸil. YanlÄ±ÅŸÄ±n var.",
                        "Olmaz. MÃ¼mkÃ¼n deÄŸil.",
                        "Bu fiyata imkansÄ±z.",
                        "BaÅŸka kapÄ±ya."
                    ],
                    suspicious: [
                        "Ã‡Ä±k dÄ±ÅŸarÄ±! Hemen!",
                        "Seni ciddiye alanda kabahat. Defol.",
                        "SabrÄ±mÄ± zorluyorsun yabancÄ±.",
                        "Delirdin mi? Kaybol!",
                        "Benimle alay mÄ± ediyorsun?",
                        "Seni buradan attÄ±rÄ±rÄ±m. Git.",
                        "O fiyatÄ± rÃ¼yanda gÃ¶rÃ¼rsÃ¼n.",
                        "Soyguncu musun nesin? Git baÅŸÄ±mdan.",
                        "Sana tek kuruÅŸ vermem bu kafayla.",
                        "KonuÅŸma bitti. Git.",
                        "Defol!"
                    ]
                },
                threatResponse: [
                    "Beni tehdit etme, zararlÄ± Ã§Ä±karsÄ±n.",
                    "Cesaretini takdir ettim ama aptallÄ±ÄŸÄ±nÄ± deÄŸil.",
                    "Tamam tamam, sakin ol. Belki bir ÅŸeyler yapabiliriz.",
                    "Heeey, sakin ol kovboy. BurasÄ± vahÅŸi batÄ± deÄŸil.",
                    "Tehdit mi? HoÅŸuma gitti. Ama fiyat deÄŸiÅŸmez.",
                    "Beni korkutabileceÄŸini mi sandÄ±n? Komik Ã§ocuk.",
                    "GÃ¼venliÄŸi Ã§aÄŸÄ±rmadan sesini alÃ§alt.",
                    "Senin gibi niceleri geldi geÃ§ti. BlÃ¶fÃ¼nÃ¼ yemem."
                ],
                consulting_start: {
                    friendly: [
                        "Senden bu kadar kaliteli bir ÅŸey Ã§Ä±kmaz ama, neyse... Gidip bir ${itemName} uzmanÄ±ma danÄ±ÅŸÄ±p geleyim.",
                        "Tipine bakÄ±nca dolandÄ±rÄ±cÄ± gibisin ama mal gerÃ§ek gibi. Dur bi ${itemName} uzmanÄ±ma danÄ±ÅŸÄ±p geleyim.",
                        "Bunu Ã§Ã¶pten bulmadÄ±ÄŸÄ±na emin misin? Bekle, ${itemName} uzmanÄ±ma danÄ±ÅŸÄ±p geleyim.",
                        "Vay canÄ±na, gerÃ§ek mi bu? Ä°nanmam iÃ§in ${itemName} uzmanÄ±mÄ±n gÃ¶rmesi lazÄ±m.",
                        "Sen ve kalite? Yan yana gelmez ama... Dur bi ${itemName} uzmanÄ±ma sorayÄ±m.",
                        "EÄŸer bu sahteyse seni fena yaparÄ±m (ÅŸaka ÅŸaka). Bekle, ${itemName} uzmanÄ±m baksÄ±n."
                    ],
                    neutral: [
                        "Bunu bir ${itemName} uzmanÄ±ma danÄ±ÅŸÄ±p geleyim. Bekle burada.",
                        "Bir dakka, ÅŸunu hemen ${itemName} uzmanÄ±ma danÄ±ÅŸÄ±p geliyorum.",
                        "Bekle biraz, ÅŸunu bi ${itemName} uzmanÄ±ma danÄ±ÅŸÄ±p geleyim.",
                        "Emin olamÄ±yorum. ${itemName} uzmanÄ±m iÃ§eride, ona gÃ¶stereceÄŸim.",
                        "ProsedÃ¼r gereÄŸi bunu ${itemName} uzmanÄ±na gÃ¶stermem lazÄ±m."
                    ],
                    suspicious: [
                        "GÃ¶zÃ¼m seni hiÃ§ tutmadÄ±. Bu ${itemName} uzmanÄ±ma gÃ¶stermeden almam.",
                        "EÄŸer sahteyse baÅŸÄ±n derde girer. Gidip ${itemName} uzmanÄ±ma danÄ±ÅŸÄ±p geleyim.",
                        "MalÄ±na gÃ¼venmiyorum, sana hiÃ§ gÃ¼venmiyorum. Mecburen ${itemName} uzmanÄ±ma danÄ±ÅŸÄ±p geleyim.",
                        "Burada bekle, kÄ±pÄ±rdama. ${itemName} uzmanÄ±m inceleyecek.",
                        "Sahte Ã§Ä±karsa polis Ã§aÄŸÄ±rÄ±rÄ±m. ${itemName} uzmanÄ±m ÅŸimdi bakacak."
                    ]
                },
                consulting_end: {
                    friendly: [
                        "ArkadaÅŸÄ±m baktÄ±, sorun yokmuÅŸ. ÅaÅŸÄ±rtÄ±cÄ±... Hadi fiyatÄ± konuÅŸalÄ±m.",
                        "TamamdÄ±r, onay verdi. Hadi yine iyisin, dÃ¶rt ayak Ã¼stÃ¼ne dÃ¼ÅŸtÃ¼n.",
                        "GerÃ§ekmiÅŸ! Ä°nanÄ±lÄ±r gibi deÄŸil. Tamam gel anlaÅŸalÄ±m.",
                        "UzmanÄ±m 'fena deÄŸil' dedi. Benden duymuÅŸ olma ama beÄŸendi."
                    ],
                    neutral: [
                        "UzmanÄ±m inceledi. TamamdÄ±r, pazarlÄ±ÄŸa geÃ§elim.",
                        "Geldim. UzmanÄ±mla konuÅŸtum, bir sÄ±kÄ±ntÄ± yok.",
                        "OnaylandÄ±. Fiyat konuÅŸabiliriz.",
                        "Tamam, temizmiÅŸ."
                    ],
                    suspicious: [
                        "UzmanÄ±m gerÃ§ek dedi ama benim hala ÅŸÃ¼phelerim var. Neyse.",
                        "Åimdilik inandÄ±m say. Ama gÃ¶zÃ¼m Ã¼zerinde.",
                        "Tamam, sahte deÄŸilmiÅŸ. Ama ucuza kapatÄ±rÄ±m.",
                        "ÅanslÄ± gÃ¼nÃ¼ndesin, onay aldÄ±."
                    ]
                }
            },

            getLine: function(category, reputation) {
                // If the category is threatResponse (array), return directly
                if (Array.isArray(this.dialogue[category])) {
                    const lines = this.dialogue[category];
                    return lines[Math.floor(Math.random() * lines.length)];
                }

                let tier = 'neutral';
                if (reputation > 70) tier = 'friendly';
                else if (reputation < 30) tier = 'suspicious';

                const lines = this.dialogue[category][tier];
                return lines[Math.floor(Math.random() * lines.length)];
            },

            // Logic to determine initial offer (always lowball)
            calculateOffer: function(itemRealValue, reputation) {
                // Base offer is 40-60% of real value
                let percent = 0.4 + (Math.random() * 0.2);

                // Reputation bonus
                if (reputation > 70) percent += 0.15; // Better offers for friends
                if (reputation < 30) percent -= 0.15; // Worse for suspicious

                return Math.floor(itemRealValue * percent);
            }
        };

        // --- STATE ---
        let gameState = {
            money: GAME_CONFIG.startMoney,
            round: 1,
            reputation: 50, // 0-100, 50 is neutral
            inventory: [],
            currentUnit: null,
            history: [],
            gameOver: false,
            eoPatience: 4, // Max 4 per round
            negotiationMemory: {}, // Remembers offers per item
            auction: null, // Active auction state
            // NEW FIELDS
            xp: 0,
            level: 1,
            skillPoints: 0,
            skills: {
                xray: 0,
                silverTongue: 0,
                restorer: 0,
                hoarder: 0
            },
            quests: [], // Active quests
            inventoryLimit: 10,
            storageLevel: 1
        };

        // --- DOM ELEMENTS ---
        const ui = {
            app: document.getElementById('app'),
            money: document.getElementById('ui-money'),
            round: document.getElementById('ui-round'),
            rep: document.getElementById('ui-reputation')
        };

        // --- INIT ---
        window.onload = () => {
            initGame();
        };

        function initGame() {
            console.log("Oyun BaÅŸlatÄ±ldÄ±.");
            updateHeader();
            startRound();
        }

        function updateHeader() {
            ui.money.innerText = gameState.money.toLocaleString('tr-TR') + ' â‚º';
            ui.round.innerText = gameState.round;

            let repText = "NÃ¶tr";
            if (gameState.reputation > 70) repText = "Dost";
            else if (gameState.reputation > 85) repText = "Ortak";
            else if (gameState.reputation < 30) repText = "ÅÃ¼pheli";
            else if (gameState.reputation < 15) repText = "DÃ¼ÅŸman";

            ui.rep.innerText = repText;
            ui.rep.style.color = gameState.reputation < 30 ? 'var(--danger-color)' : (gameState.reputation > 70 ? 'var(--success-color)' : 'var(--text-color)');
        }

        // --- GAME LOGIC ---

        // XP SYSTEM
        function addXp(amount) {
            gameState.xp += amount;
            const xpNeeded = gameState.level * 1000;
            if (gameState.xp >= xpNeeded) {
                gameState.level++;
                gameState.xp -= xpNeeded;
                gameState.skillPoints++;
                alert(`ğŸ‰ TEBRÄ°KLER! Seviye AtladÄ±n! Yeni Seviye: ${gameState.level}. +1 Yetenek PuanÄ± kazandÄ±n.`);
            }
            updateHeader();
        }

        // QUEST SYSTEM
        function generateQuests() {
            gameState.quests = [];
            const questCount = 2 + Math.floor(Math.random() * 2); // 2 or 3
            const categories = ["Elektronik", "Antika", "Giyim", "Mobilya", "Spor"];

            for(let i=0; i<questCount; i++) {
                const isSellQuest = Math.random() > 0.5;
                if (isSellQuest) {
                    const type = Math.random() > 0.7 ? 'rare' : 'common';
                    const targetCount = 1 + Math.floor(Math.random() * 2);
                    const rewardMult = type === 'rare' ? 2 : 1;
                    gameState.quests.push({
                        id: Date.now() + i,
                        text: `${targetCount} adet ${type === 'rare' ? 'Nadir' : 'SÄ±radan'} eÅŸya sat`,
                        type: 'sell_rarity',
                        target: type,
                        count: targetCount,
                        current: 0,
                        rewardMoney: 500 * targetCount * rewardMult,
                        rewardXp: 100 * targetCount * rewardMult
                    });
                } else {
                    const cat = categories[Math.floor(Math.random() * categories.length)];
                    const targetCount = 1 + Math.floor(Math.random() * 2);
                    gameState.quests.push({
                        id: Date.now() + i,
                        text: `${targetCount} adet ${cat} kategorisinde eÅŸya sat`,
                        type: 'sell_category',
                        target: cat,
                        count: targetCount,
                        current: 0,
                        rewardMoney: 400 * targetCount,
                        rewardXp: 80 * targetCount
                    });
                }
            }
        }

        function checkQuestProgress(item) {
            let completedAny = false;
            gameState.quests.forEach(q => {
                if (q.completed) return;

                let match = false;
                if (q.type === 'sell_rarity' && item.type === q.target) match = true;
                if (q.type === 'sell_category' && item.category === q.target) match = true;

                if (match) {
                    q.current++;
                    if (q.current >= q.count) {
                        q.completed = true;
                        gameState.money += q.rewardMoney;
                        addXp(q.rewardXp);
                        alert(`âœ… GÃ–REV TAMAMLANDI: ${q.text}\nÃ–dÃ¼l: ${q.rewardMoney}â‚º, ${q.rewardXp} XP`);
                        completedAny = true;
                    }
                }
            });
            if(completedAny) updateHeader();
        }

        function startRound() {
            gameState.availableUnits = generateStorageUnits();
            generateQuests(); // New quests every round

            // Determine Patience based on Reputation
            if (gameState.reputation > 70) gameState.eoPatience = 4;
            else if (gameState.reputation < 30) gameState.eoPatience = 2;
            else gameState.eoPatience = 3;

            gameState.negotiationMemory = {};

            // Check for Game Over (Bankruptcy)
            // If the player cannot afford the cheapest unit, they are done.
            const cheapestUnit = Math.min(...gameState.availableUnits.map(u => u.price));

            if (gameState.money < cheapestUnit) {
                renderGameOver();
            } else {
                renderStorageSelection();
            }
        }

        function renderGameOver() {
            ui.app.innerHTML = `
                <div class="screen screen-glass">
                    <h1 style="color: var(--danger-color)">ğŸš« Ä°FLAS ETTÄ°N</h1>
                    <div style="font-size:3rem; margin:20px;">ğŸ’¸</div>
                    <p>Cebinde kalan para: <span class="money">${gameState.money} â‚º</span></p>
                    <div class="speech-bubble" style="margin:20px auto; color:#333;">EO: "ÃœzgÃ¼nÃ¼m dostum, burasÄ± hayÄ±r kurumu deÄŸil. BaÅŸka kapÄ±ya."</div>
                    <p>UlaÅŸÄ±lan Tur: ${gameState.round}</p>
                    <button class="btn" onclick="location.reload()">ğŸ”„ TEKRAR DENE</button>
                </div>
            `;
        }

        function generateStorageUnits() {
            const units = [];
            const risks = ['DÃ¼ÅŸÃ¼k', 'Orta', 'YÃ¼ksek'];

            for(let i=0; i<5; i++) {
                // Black Market Chance (3%)
                let isBlackMarket = Math.random() < 0.03;

                let riskLevel, riskLabel, name, desc, className;
                let estimatedMin, estimatedMax;

                if (isBlackMarket) {
                    riskLevel = 3; // Special ID for Black Market
                    riskLabel = "KARA BORSA";
                    name = `Depo #${100 + i + (gameState.round * 5)} (KARA BORSA)`;
                    className = "black-market";
                    desc = "KÄ±rmÄ±zÄ± bir Ä±ÅŸÄ±k yayÄ±yor... Ä°Ã§erisi tehlikeli gÃ¶rÃ¼nÃ¼yor.";

                    let baseVal = 15000 + (gameState.round * 2000);
                    // Black market estimate is always huge range
                    estimatedMin = Math.floor(baseVal * 0.5);
                    estimatedMax = Math.floor(baseVal * 3.0);

                } else {
                    riskLevel = Math.floor(Math.random() * 3); // 0, 1, 2
                    riskLabel = risks[riskLevel];
                    name = `Depo #${100 + i + (gameState.round * 5)}`;
                    className = "";
                    desc = generateUnitDescription(riskLevel);

                    let baseVal = 500 + (gameState.round * 50);
                    if(riskLevel === 1) baseVal *= 1.5;
                    if(riskLevel === 2) baseVal *= 2.5;

                    // Accuracy Logic
                    if (riskLevel === 0) { // Low Risk: Accurate
                        estimatedMin = Math.floor(baseVal * 0.9);
                        estimatedMax = Math.floor(baseVal * 1.1);
                    } else if (riskLevel === 1) { // Med Risk: Balanced
                        estimatedMin = Math.floor(baseVal * 0.7);
                        estimatedMax = Math.floor(baseVal * 1.4);
                    } else { // High Risk: Wild
                        estimatedMin = Math.floor(baseVal * 0.4);
                        estimatedMax = Math.floor(baseVal * 2.5);
                    }
                }

                units.push({
                    id: i,
                    name: name,
                    risk: riskLevel,
                    riskLabel: riskLabel,
                    estimatedMin: estimatedMin,
                    estimatedMax: estimatedMax,
                    description: desc,
                    className: className,
                    soldTo: null // Tracks if AI bought it
                });
            }
            return units;
        }

        function generateUnitDescription(risk) {
            const descs = [
                ["Temiz gÃ¶rÃ¼nÃ¼yor.", "BirkaÃ§ koli var.", "Standart ev eÅŸyalarÄ±."], // Low
                ["KarÄ±ÅŸÄ±k bir yÄ±ÄŸÄ±n.", "BazÄ± kutular kapalÄ±.", "Tozlu ama dolu."], // Med
                ["Tam bir muamma.", "Ya hazine ya Ã§Ã¶p.", "AÄŸÄ±r kutular var."] // High
            ];
            return descs[risk][Math.floor(Math.random() * descs[risk].length)];
        }

        // --- AUCTION SYSTEM ---

        window.startAuction = function(unitId) {
            const unit = gameState.availableUnits.find(u => u.id === unitId);
            if (!unit) return;

            // Initialize Auction State
            const startBid = Math.floor((unit.estimatedMin + unit.estimatedMax) / 2 * 0.5);

            gameState.auction = {
                unit: unit,
                currentBid: startBid,
                highestBidder: null, // null = no one yet (or house)
                timer: 0, // 0=Waiting, 1=Going Once, 2=Going Twice, 3=Sold
                timerInterval: null,
                participants: OPPONENTS.map(op => ({
                    ...op,
                    isFolded: false,
                    lastAction: null // 'bid', 'pass', 'wait'
                })),
                log: [`Ä°hale baÅŸladÄ±! BaÅŸlangÄ±Ã§ fiyatÄ±: ${startBid} â‚º`],
                playerFolded: false,
                lastBidTime: Date.now(),
                lastLogIndex: 0
            };

            setupAuctionUI();

            // Start the loop
            if (gameState.auction.timerInterval) clearInterval(gameState.auction.timerInterval);
            gameState.auction.timerInterval = setInterval(updateAuctionLoop, 1000);
        };

        function setupAuctionUI() {
            const auc = gameState.auction;
            const unit = auc.unit;

            // Participants HTML
            const opponentsHtml = auc.participants.map(p => {
                return `
                <div id="opponent-card-${p.id}" class="opponent-card" style="--char-color: ${p.color}">
                    <div class="opponent-avatar">${p.avatar}</div>
                    <div class="opponent-name">${p.name}</div>
                    <div id="leader-badge-${p.id}" style="font-size:0.7rem; color:var(--char-color); font-weight:bold; display:none;">LÄ°DER</div>
                </div>
                `;
            }).join('');

            ui.app.innerHTML = `
                <div class="screen screen-glass" style="max-width:1000px">
                    <div class="auction-header">
                        <div>
                            <h2 style="margin:0">${unit.name}</h2>
                            <div style="font-size:0.9rem; opacity:0.7">Tahmini: ${unit.estimatedMin} - ${unit.estimatedMax} â‚º</div>
                        </div>
                        <div class="money">${gameState.money} â‚º</div>
                    </div>

                    <div class="auction-main">
                        <div class="auction-visual">
                            <div style="font-size:1.2rem; color:#aaa; margin-bottom:10px;">GÃœNCEL TEKLÄ°F</div>
                            <div id="auction-current-bid" class="current-bid-display">${auc.currentBid} â‚º</div>
                            <div id="auction-timer-text" class="timer-display">Teklif Bekleniyor...</div>
                            <div id="player-win-msg" style="color:var(--success-color); font-weight:bold; margin-top:10px; display:none;">ğŸ† ÅU AN KAZANIYORSUN!</div>
                        </div>

                        <div class="opponents-grid">
                            ${opponentsHtml}
                            <!-- Player Card -->
                            <div id="opponent-card-player" class="opponent-card" style="--char-color: #00e676">
                                <div class="opponent-avatar">ğŸ‘¤</div>
                                <div class="opponent-name">SEN</div>
                                <div id="leader-badge-player" style="font-size:0.7rem; color:var(--success-color); font-weight:bold; display:none;">LÄ°DER</div>
                            </div>
                        </div>

                        <div class="bid-log" id="auction-log">
                            <div class="log-entry">${auc.log[0]}</div>
                        </div>

                        <div class="player-controls">
                            <button id="btn-bid-50" class="btn" onclick="placePlayerBid(50)">+50 â‚º</button>
                            <button id="btn-bid-200" class="btn" onclick="placePlayerBid(200)">+200 â‚º</button>
                            <button id="btn-fold" class="btn btn-danger" onclick="playerFold()">Ã‡EKÄ°L ğŸ³ï¸</button>
                        </div>
                    </div>
                </div>
            `;

            // Set initial lastLogIndex
            auc.lastLogIndex = 1;
        }

        function updateAuctionUI() {
            const auc = gameState.auction;
            if(!auc) return;

            // Update Bid Text
            document.getElementById('auction-current-bid').innerText = auc.currentBid + ' â‚º';

            // Update Timer Text
            let timerText = "Teklif Bekleniyor...";
            if (auc.timer === 1) timerText = "SATILIYOR... (1)";
            if (auc.timer === 2) timerText = "SATILIYOR... (2)";
            if (auc.timer === 3) timerText = "SATILDI!";
            document.getElementById('auction-timer-text').innerText = timerText;

            // Update Participants Visuals
            auc.participants.forEach(p => {
                const card = document.getElementById(`opponent-card-${p.id}`);
                const badge = document.getElementById(`leader-badge-${p.id}`);

                if (card) {
                    // Classes
                    if (p.isFolded) {
                        card.classList.add('folded');
                        card.classList.remove('active-bidder');
                    } else if (auc.highestBidder && auc.highestBidder.id === p.id) {
                        card.classList.add('active-bidder');
                        card.classList.remove('folded');
                    } else {
                        card.classList.remove('active-bidder', 'folded');
                    }
                }

                if (badge) {
                    badge.style.display = (auc.highestBidder && auc.highestBidder.id === p.id) ? 'block' : 'none';
                }
            });

            // Update Player Visuals
            const pCard = document.getElementById('opponent-card-player');
            const pBadge = document.getElementById('leader-badge-player');
            const pWinMsg = document.getElementById('player-win-msg');
            const isPlayerLeader = auc.highestBidder && auc.highestBidder.id === 'player';

            if (pCard) {
                if (auc.playerFolded) {
                    pCard.classList.add('folded');
                    pCard.classList.remove('active-bidder');
                } else if (isPlayerLeader) {
                    pCard.classList.add('active-bidder');
                    pCard.classList.remove('folded');
                } else {
                    pCard.classList.remove('active-bidder', 'folded');
                }
            }

            if (pBadge) pBadge.style.display = isPlayerLeader ? 'block' : 'none';
            if (pWinMsg) pWinMsg.style.display = isPlayerLeader ? 'block' : 'none';

            // Update Buttons
            const canBid = !auc.playerFolded && gameState.money >= (auc.currentBid + 50) && auc.timer < 3;
            document.getElementById('btn-bid-50').disabled = !canBid;
            document.getElementById('btn-bid-200').disabled = !canBid;
            document.getElementById('btn-fold').disabled = (auc.playerFolded || auc.timer >= 3);

            // Update Log (Append only)
            const logContainer = document.getElementById('auction-log');
            if (logContainer && auc.lastLogIndex < auc.log.length) {
                for (let i = auc.lastLogIndex; i < auc.log.length; i++) {
                    const entry = auc.log[i];
                    const isHigh = entry.includes('teklif');
                    const isFold = entry.includes('Ã§ekildi');
                    const className = isHigh ? 'high-bid' : (isFold ? 'fold' : '');

                    const div = document.createElement('div');
                    div.className = `log-entry ${className}`;
                    div.innerText = entry;
                    logContainer.appendChild(div);
                }
                auc.lastLogIndex = auc.log.length;
                logContainer.scrollTop = logContainer.scrollHeight;
            }
        }

        function showSpeech(id, type) {
            const linesObj = OPPONENT_LINES[id];
            if (!linesObj) return;

            const lines = linesObj[type];
            if (!lines || lines.length === 0) return;

            const text = lines[Math.floor(Math.random() * lines.length)];

            const card = document.getElementById(`opponent-card-${id}`);
            if (!card) return;

            // Remove existing bubble if any
            const existing = card.querySelector('.mini-bubble');
            if (existing) existing.remove();

            // Determine Position (Zig-Zag)
            // Yilong (0) -> Top, Hasan (1) -> Bottom, Daniel (2) -> Top, Cilem (3) -> Bottom
            const opIndex = OPPONENTS.findIndex(o => o.id === id);
            const isTop = (opIndex === -1) ? true : (opIndex % 2 === 0);
            const posClass = isTop ? 'bubble-top' : 'bubble-bottom';

            const bubble = document.createElement('div');
            bubble.className = `mini-bubble ${posClass}`;
            bubble.innerText = text;

            card.appendChild(bubble);

            setTimeout(() => {
                bubble.style.opacity = '0';
                setTimeout(() => bubble.remove(), 300);
            }, 3000);
        }

        window.placePlayerBid = function(amount) {
            const auc = gameState.auction;
            if(!auc || auc.playerFolded) return;

            const nextBid = auc.currentBid + amount;
            if(gameState.money < nextBid) {
                alert("Yetersiz bakiye!");
                return;
            }

            placeBid('player', nextBid);
        };

        window.playerFold = function() {
            const auc = gameState.auction;
            if(!auc) return;

            // Stop timer
            if (auc.timerInterval) clearInterval(auc.timerInterval);

            // Mark unit as sold/unusable
            // User requested: "o depo kullanÄ±lamaz olsun artÄ±k"
            // We mark it as sold to an anonymous buyer so it appears grayed out
            auc.unit.soldTo = { name: "BaÅŸkasÄ±" };

            // Clear active auction
            gameState.auction = null;

            // Return immediately
            renderStorageSelection();
        };

        function updateAuctionLoop() {
            const auc = gameState.auction;
            if(!auc) return;

            // Timer Logic
            const now = Date.now();
            const timeSinceLastBid = now - auc.lastBidTime;

            if (timeSinceLastBid > 9000) {
                auc.timer = 3; // SOLD
                updateAuctionUI(); // Final update
                clearInterval(auc.timerInterval);
                setTimeout(endAuction, 500); // Small delay to see SOLD state
            } else if (timeSinceLastBid > 6000) {
                auc.timer = 2; // Going Twice
            } else if (timeSinceLastBid > 3000) {
                auc.timer = 1; // Going Once
            } else {
                auc.timer = 0; // Waiting
            }

            // Random Speech Chance (Idle)
            if (Math.random() < 0.05) { // 5% per second
                const active = auc.participants.filter(p => !p.isFolded);
                if (active.length > 0) {
                    const speaker = active[Math.floor(Math.random() * active.length)];
                    showSpeech(speaker.id, 'random');
                }
            }

            // Process AI (if not sold)
            if (auc.timer < 3) {
                 processAIBidding();
            }

            updateAuctionUI();
        }

        function processAIBidding() {
            const auc = gameState.auction;
            // Only one AI bids per tick max to avoid chaos, or random chance
            if (Math.random() < 0.6) return; // 60% chance no one acts this tick

            // Shuffle participants to randomise order
            const activeAI = auc.participants.filter(p => !p.isFolded && p.id !== (auc.highestBidder ? auc.highestBidder.id : ''));
            if (activeAI.length === 0) return;

            const ai = activeAI[Math.floor(Math.random() * activeAI.length)];

            // Decision Logic
            const unit = auc.unit;

            if (!ai.perceivedLimit) {
                // Initialize limit once
                let estimateAvg = (unit.estimatedMin + unit.estimatedMax) / 2;
                let riskFactor = 1;
                if (unit.risk === 1) riskFactor = 1.2;
                if (unit.risk === 2) riskFactor = 1.5;
                if (unit.risk === 3) riskFactor = 2.0; // Black market

                switch(ai.id) {
                    case 'yilong': // Crazy, rich, troll
                        ai.perceivedLimit = unit.estimatedMax * (1 + Math.random() * 2);
                        break;
                    case 'hasan': // Scrap dealer, very conservative
                        ai.perceivedLimit = unit.estimatedMin * (0.8 + Math.random() * 0.3);
                        break;
                    case 'daniel': // Smart, calculates margin
                        ai.perceivedLimit = unit.estimatedMax * 0.8;
                        break;
                    case 'cilem': // Pessimist, poor
                        ai.perceivedLimit = unit.estimatedMin * (0.5 + Math.random() * 0.4);
                        break;
                }
            }

            // Logic to Bid or Fold
            const nextMinBid = auc.currentBid + 50;

            // Check budget
            if (nextMinBid > ai.wealth) {
                ai.isFolded = true;
                auc.log.push(`${ai.avatar} ${ai.name} parasÄ±zlÄ±ktan Ã§ekildi.`);
                showSpeech(ai.id, 'fold');
                return;
            }

            // Check Limit
            if (nextMinBid > ai.perceivedLimit) {
                // Yilong might troll and go over limit sometimes (10%)
                if (ai.id === 'yilong' && Math.random() < 0.1) {
                     // Troll bid
                } else {
                    ai.isFolded = true;
                    auc.log.push(`${ai.avatar} ${ai.name} Ã§ekildi.`);
                    showSpeech(ai.id, 'fold');
                    return;
                }
            }

            // Yilong "Wait" Logic
            if (ai.id === 'yilong' && Math.random() < 0.3) {
                return;
            }

            // Place Bid
            let increment = 50;
            if (ai.aggressive > 0.5 && Math.random() < 0.5) increment = 200;
            if (ai.id === 'yilong' && Math.random() < 0.2) increment = 500;

            placeBid(ai.id, auc.currentBid + increment);
        }

        function placeBid(bidderId, amount) {
            const auc = gameState.auction;
            if(auc.timer >= 3) return; // Closed

            // Update State
            auc.currentBid = amount;

            if (bidderId === 'player') {
                auc.highestBidder = { id: 'player', name: 'SEN' };
                auc.log.push(`ğŸ‘¤ SEN ${amount} â‚º teklif verdin!`);
            } else {
                const ai = auc.participants.find(p => p.id === bidderId);
                auc.highestBidder = ai;
                auc.log.push(`${ai.avatar} ${ai.name} ${amount} â‚º teklif verdi!`);

                showSpeech(ai.id, 'bid');
            }

            // Reset Timer
            auc.lastBidTime = Date.now();
            auc.timer = 0;

            // Immediate UI update for responsiveness
            updateAuctionUI();
        }

        function endAuction() {
            const auc = gameState.auction;
            const winner = auc.highestBidder;

            if (winner && winner.id === 'player') {
                // Player Won
                if (gameState.money >= auc.currentBid) {
                    completePlayerPurchase(auc.unit, auc.currentBid);
                } else {
                    alert("Hata: Yetersiz Bakiye!");
                    renderStorageSelection();
                }
            } else if (winner) {
                // AI Won
                alert(`Ä°haleyi ${winner.name} kazandÄ±! Fiyat: ${auc.currentBid} â‚º`);
                auc.unit.soldTo = winner;
                renderStorageSelection();
            } else {
                alert("Kimse teklif vermedi. Ä°hale iptal.");
                renderStorageSelection();
            }
            gameState.auction = null;
        }

        function completePlayerPurchase(unit, finalPrice) {
            gameState.money -= finalPrice;
            gameState.currentUnit = unit;
            updateHeader();

            // Generate items
            const newItems = generateItemsForUnit(unit);
            gameState.inventory.push(...newItems);

            // Remove unit from available list? Or mark as sold to player?
            // Original logic removed it from "availableUnits" implicitly by regenerating or just showing the reveal screen.
            // But if we want to return to the list later, we should mark it.
            // However, the game flow is: Buy -> Reveal -> Hub. So we don't need to persist it in the list for this round usually.
            // But let's follow the standard 'revealItems' flow which replaces the screen.

            revealItems(newItems);
        }

        function renderStorageSelection() {
            const containerHtml = gameState.availableUnits.map(unit => {
                let riskClass;
                if(unit.risk === 3) riskClass = 'risk-black';
                else riskClass = unit.risk === 0 ? 'risk-low' : (unit.risk === 1 ? 'risk-med' : 'risk-high');

                const isSold = unit.soldTo !== null;
                // Min start bid is approx 50% of avg estimate, checking afford based on that
                const startBid = Math.floor((unit.estimatedMin + unit.estimatedMax) / 2 * 0.5);
                const canAfford = gameState.money >= startBid;

                let cardContent = `
                    <h3>${unit.name}</h3>
                    <p>${unit.description}</p>
                    <div class="risk-badge ${riskClass}">Risk: ${unit.riskLabel}</div>
                    <div class="unit-price" style="margin-top:auto; font-size:1.1rem; color:#ccc;">
                        Tahmini: <span style="color:var(--accent-color); font-weight:bold;">${unit.estimatedMin} - ${unit.estimatedMax} â‚º</span>
                    </div>
                `;

                let clickAction = "";
                let cardStyle = "";

                if (isSold) {
                    cardContent += `<div style="margin-top:10px; color:var(--danger-color); font-weight:bold; border:2px solid var(--danger-color); padding:5px; border-radius:5px; transform:rotate(-5deg);">SATILDI: ${unit.soldTo.name}</div>`;
                    cardStyle = "opacity:0.6; filter:grayscale(0.8); cursor:default;";
                } else {
                    if (canAfford) {
                        clickAction = `onclick="startAuction(${unit.id})"`;
                    } else {
                        cardStyle = "opacity:0.5; cursor:not-allowed;";
                    }
                }

                return `
                <div class="storage-card ${unit.className}" ${clickAction} style="${cardStyle}">
                    ${cardContent}
                </div>
                `;
            }).join('');

            ui.app.innerHTML = `
                <div class="screen">
                    <h2 style="font-size:2rem; margin-bottom:10px">ğŸ“¢ GÃœNÃœN Ä°HALESÄ°</h2>
                    <p style="color:#aaa">Mevcut Bakiye: <span class="money">${gameState.money} â‚º</span></p>
                    <div class="storage-grid">
                        ${containerHtml}
                    </div>
                    <button class="btn" onclick="startHubPhase()">ğŸ™ï¸ ÅEHRE DÃ–N</button>
                </div>
            `;
        }

        // --- EXPERT PHASE ---

        window.startExpertPhase = function() {
            renderExpert();
        };

        function renderExpert() {
             const listHtml = gameState.inventory.map(item => {
                let rarityInfo = Object.values(RARITY).find(r => r.id === item.type);
                const fee = Math.max(50, Math.floor(item.realValue * 0.05));
                const canAfford = gameState.money >= fee;

                return `
                <div class="item-row rarity-${item.type}">
                    <div>
                        <strong>${item.name}</strong> ${item.certified ? 'âœ…' : ''}<br>
                        <span style="color:${rarityInfo.color}; font-size:0.8rem">${rarityInfo.label}</span>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px;">
                        ${item.certified
                            ? `<span style="color:var(--success-color); font-weight:bold;">DEÄER: ${item.realValue} â‚º</span>`
                            : `<button class="btn" style="font-size:0.8rem" onclick="certifyItem(${item.id}, ${fee})" ${!canAfford ? 'disabled' : ''}>ONAYLAT (-${fee}â‚º)</button>`
                        }
                    </div>
                </div>
                `;
            }).join('');

            ui.app.innerHTML = `
                <div class="screen screen-glass">
                    <h2>ğŸ§ EKSPERTÄ°Z BÃœROSU</h2>
                    <p>Burada ÅŸÃ¼pheli eÅŸyalarÄ±n orijinalliÄŸini kanÄ±tlayabilirsin. OnaylÄ± eÅŸyalar EO karÅŸÄ±sÄ±nda daha deÄŸerli olur.</p>
                    <p>Paran: <span class="money">${gameState.money} â‚º</span></p>
                    <div class="item-list">
                        ${listHtml}
                    </div>
                    <button class="btn" onclick="startHubPhase()">ğŸ™ï¸ ÅEHRE DÃ–N</button>
                </div>
            `;
        }

        window.certifyItem = function(id, fee) {
            if (gameState.money < fee) return;

            const item = gameState.inventory.find(i => i.id === id);
            gameState.money -= fee;

            // 25% Chance for Fake/Junk
            if (Math.random() < 0.25) {
                item.type = 'junk';
                item.name = item.name + " (SAHTE)";
                item.realValue = Math.floor(item.realValue * 0.01); // 1% value
                alert("EKSPERT RAPORU: Bu Ã¼rÃ¼n SAHTE Ã§Ä±ktÄ±! DeÄŸeri dÃ¼ÅŸtÃ¼.");
            }

            item.certified = true;

            updateHeader();
            renderExpert();
        };

        // --- SHOP & NEGOTIATION ---

        let negotiationState = null;
        let selectedForBulk = new Set();

        window.startShopPhase = function() {
            selectedForBulk.clear();
            renderShop();
        };

        function toggleBulkSelection(id) {
            if (selectedForBulk.has(id)) selectedForBulk.delete(id);
            else selectedForBulk.add(id);
            renderShop(); // Re-render to update buttons state if needed
        }

        window.sellBulk = function() {
            if (selectedForBulk.size === 0) return;

            let totalValue = 0;
            const itemsToSell = [];

            gameState.inventory.forEach(item => {
                if(selectedForBulk.has(item.id)) {
                    // Bulk price is 60% of base estimate (approx realValue * 0.6)
                    totalValue += Math.floor(item.realValue * 0.6);
                    itemsToSell.push(item.id);
                }
            });

            if (confirm(`${itemsToSell.length} adet eÅŸyayÄ± toplam ${totalValue} â‚º karÅŸÄ±lÄ±ÄŸÄ±nda satmak istiyor musun?`)) {
                gameState.money += totalValue;
                gameState.inventory = gameState.inventory.filter(i => !selectedForBulk.has(i.id));
                selectedForBulk.clear();
                updateHeader();
                renderShop();
            }
        };

        function renderShop() {
            // If inventory empty, suggest leaving
            if (gameState.inventory.length === 0) {
                ui.app.innerHTML = `
                    <div class="screen screen-glass">
                        <h2>ğŸª DÃœKKAN BOÅ</h2>
                        <p>Satacak bir ÅŸeyin kalmadÄ±.</p>
                        <button class="btn" onclick="startHubPhase()">ğŸ™ï¸ ÅEHRE DÃ–N</button>
                    </div>
                `;
                return;
            }

            if (negotiationState) {
                renderNegotiation();
                return;
            }

            const listHtml = gameState.inventory.map(item => {
                let rarityInfo = Object.values(RARITY).find(r => r.id === item.type);
                const isSelected = selectedForBulk.has(item.id);

                return `
                <div class="item-row rarity-${item.type}">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <input type="checkbox" onchange="toggleBulkSelection(${item.id})" ${isSelected ? 'checked' : ''}>
                        <div>
                            <strong>${item.name}</strong> ${item.certified ? '<span class="certified-badge">ONAYLI</span>' : ''}<br>
                            <span style="color:${rarityInfo.color}; font-size:0.8rem">${rarityInfo.label}</span>
                        </div>
                    </div>
                    <button class="btn" style="font-size:0.8rem" onclick="initNegotiation(${item.id})">SAT ğŸ’°</button>
                </div>
                `;
            }).join('');

            const bulkCount = selectedForBulk.size;

            ui.app.innerHTML = `
                <div class="screen screen-glass">
                    <h2>ğŸª EO'NUN DÃœKKANI</h2>
                    <p>EO: "${EO_AI.getLine('greeting', gameState.reputation)}"</p>
                    <div style="text-align:right; margin-bottom:10px;">
                        <button class="btn btn-purple" onclick="sellBulk()" ${bulkCount === 0 ? 'disabled' : ''}>
                            ğŸ—‘ï¸ SEÃ‡Ä°LENLERÄ° TOPLU SAT (%60)
                        </button>
                    </div>
                    <div class="item-list">
                        ${listHtml}
                    </div>
                    <button class="btn" onclick="startHubPhase()">ğŸ™ï¸ ÅEHRE DÃ–N</button>
                </div>
            `;
        }

        window.initNegotiation = function(itemId) {
            const item = gameState.inventory.find(i => i.id === itemId);

            // Check Memory and handle "Return with Certificate" logic
            let mem = gameState.negotiationMemory[itemId];

            // Special case: Player certified the item AFTER a failed negotiation
            // Logic: Memory exists, was NOT certified in memory, but IS certified now
            if (mem && !mem.wasCertified && item.certified) {
                 // Reset memory for this item effectively to allow re-pricing
                 delete gameState.negotiationMemory[itemId];
                 mem = null;
            }

            if (mem) {
                negotiationState = {
                    item: item,
                    currentOffer: mem.offer,
                    status: 'active',
                    dialogue: mem.dialogue || "KaldÄ±ÄŸÄ±mÄ±z yerden devam edelim."
                };
            } else {
                // Determine dialogue tone based on reputation
                let repTier = 'neutral';
                if (gameState.reputation > 70) repTier = 'friendly';
                else if (gameState.reputation < 30) repTier = 'suspicious';

                // --- EXPERT CONSULTATION TRIGGER ---
                let isConsulting = false;
                let consultChance = 0.3; // Default Neutral
                if (repTier === 'friendly') consultChance = 0.1;
                else if (repTier === 'suspicious') consultChance = 0.6;

                if (Math.random() < consultChance) {
                    isConsulting = true;
                }
                // -----------------------------------

                let initialOffer = EO_AI.calculateOffer(item.realValue, gameState.reputation);
                let startDialogue = EO_AI.getLine('inspecting', gameState.reputation);

                // Logic for rare/uncertified items
                if ((item.type === 'rare' || item.type === 'legendary') && !item.certified) {
                    // Suspicion Check logic
                    let suspicionChance = 0.8; // Base 80%
                    if (gameState.reputation > 70) suspicionChance = 0.2; // 20% for Friends
                    if (gameState.reputation > 90) suspicionChance = 0.05; // 5% for Partners

                    if (Math.random() < suspicionChance) {
                        // SUSPICIOUS: Lowball hard
                        initialOffer = Math.floor(initialOffer * 0.3);
                        if(repTier === 'friendly') {
                            startDialogue = "Dostum bu Ã§ok deÄŸerli gÃ¶rÃ¼nÃ¼yor ama sahteleri Ã§ok. Bir belgen var mÄ±?";
                        } else if (repTier === 'suspicious') {
                             startDialogue = "Bunu Ã§aldÄ±n mÄ±? Belgesiz hiÃ§bir ÅŸey almam, ya da hurda parasÄ±na alÄ±rÄ±m.";
                        } else {
                            startDialogue = "Bu ne? Sahte gibi duruyor. KanÄ±tÄ±n var mÄ±? Yoksa sana ancak Ã§Ã¶p parasÄ± veririm.";
                        }
                    } else {
                        // TRUSTED: Treat as if certified (better offer, normal dialogue)
                        // Slightly reduce offer compared to certified but much better than lowball
                        initialOffer = Math.floor(item.realValue * (0.6 + Math.random() * 0.2));

                        if(repTier === 'friendly') {
                            startDialogue = "GÃ¼zel parÃ§a! Senden geldiÄŸi iÃ§in orijinalliÄŸine gÃ¼veniyorum.";
                        } else {
                            startDialogue = "Riskli bir parÃ§a ama sana gÃ¼veneceÄŸim. FiyatÄ±m bu.";
                        }
                    }
                } else if (item.certified) {
                     initialOffer = Math.floor(initialOffer * 1.5); // Better offer

                     // Check if this is a "Return with Certificate" moment
                     // We know it is because we cleared 'mem' above if it was a return.
                     // But we want specific dialogue if it's a return.
                     // A simple heuristic: If the offer is much higher than what it would be uncertified.
                     // Better: Just check if we had memory before we cleared it? No, too late.
                     // Let's rely on standard certified lines, OR add a flag.

                     if (gameState.negotiationMemory[itemId] === undefined) {
                         // It could be a fresh item OR a cleared memory item.
                         // We can't easily distinguish without more state.
                         // But we can say "BelgeletmiÅŸsin" generally if it is certified.

                         if(repTier === 'friendly') {
                             startDialogue = "BelgeletmiÅŸsin! Ä°ÅŸte ÅŸimdi ciddileÅŸebiliriz dostum.";
                         } else {
                             startDialogue = "BelgeletmiÅŸsin, ÅŸimdi ciddileÅŸebiliriz.";
                         }
                     }
                }

                // If consulting, override dialogue
                if (isConsulting) {
                     const lines = EO_AI.dialogue.consulting_start[repTier];
                     const rawLine = lines[Math.floor(Math.random() * lines.length)];
                     startDialogue = rawLine.replace("${itemName}", item.name);
                }

                negotiationState = {
                    item: item,
                    currentOffer: initialOffer,
                    status: 'active', // active, sold, failed
                    lastMove: 'start',
                    dialogue: startDialogue,
                    isConsulting: isConsulting
                };

                // Save immediately
                saveNegotiationState();

                // Handle the timer if consulting
                if (isConsulting) {
                    setTimeout(() => {
                         // Check if we are still negotiating the same item
                         if(negotiationState && negotiationState.item.id === item.id && negotiationState.isConsulting) {
                             negotiationState.isConsulting = false;
                             negotiationState.dialogue = EO_AI.getLine('consulting_end', gameState.reputation);
                             
                             // Update memory to reflect we returned
                             saveNegotiationState();
                             renderNegotiation();
                         }
                    }, 5000);
                }
            }

            renderNegotiation();
        };

        function saveNegotiationState() {
            if (negotiationState && negotiationState.item) {
                gameState.negotiationMemory[negotiationState.item.id] = {
                    offer: negotiationState.currentOffer,
                    dialogue: negotiationState.dialogue,
                    wasCertified: negotiationState.item.certified // Store this to detect changes later
                };
            }
        }

        function renderNegotiation() {
            const state = negotiationState;
            const item = state.item;
            const rarityInfo = Object.values(RARITY).find(r => r.id === item.type);
            const playerKnowsValue = item.certified;

            // Check consulting state
            const isConsulting = state.isConsulting;

            // Patience Visualization
            let patienceHtml = '';
            for(let i=0; i<4; i++) {
                patienceHtml += (i < gameState.eoPatience) ? 'ğŸ”´ ' : 'âšª ';
            }

            const patienceLow = gameState.eoPatience <= 0;

            ui.app.innerHTML = `
                <div class="screen screen-glass" style="max-width:1000px; padding:0;">
                    <div class="scene-container">
                        <div class="scene-overlay"></div>
                        <div class="eo-avatar-container">
                             ${isConsulting 
                                ? `<div style="height:120px; display:flex; align-items:center; justify-content:center; color:#ccc; font-style:italic; font-size:1.2rem; text-shadow:0 0 10px rgba(0,0,0,0.8);">(Uzman aranÄ±yor...)</div>` 
                                : `<div class="eo-avatar">ğŸ‘º</div>`
                             }
                             <div class="speech-bubble">"${state.dialogue}"</div>
                             <div style="margin-top:10px; font-size:1.2rem; background:rgba(0,0,0,0.5); padding:5px 10px; border-radius:10px;">
                                SABIR: ${patienceHtml}
                             </div>
                        </div>

                        <div class="negotiation-desk">
                            <div class="desk-item">
                                <h3 style="margin:0; color:var(--accent-color)">${item.name}</h3>
                                <div style="font-size:0.8rem; opacity:0.8">${rarityInfo.label} ${item.certified ? 'âœ…' : ''}</div>
                                <div style="margin-top:5px; font-weight:bold; color:var(--success-color)">TEKLÄ°F: ${state.currentOffer} â‚º</div>
                                ${playerKnowsValue ? `<div style="font-size:0.7rem; color:#aaa">GerÃ§ek DeÄŸer: ${item.realValue} â‚º</div>` : ''}
                            </div>

                            <div class="desk-actions">
                                <button class="btn" onclick="actionAccept()" ${isConsulting ? 'disabled' : ''}>âœ… KABUL (${state.currentOffer} â‚º)</button>
                                <button class="btn" onclick="showCounterInput()" ${patienceLow || isConsulting ? 'disabled' : ''}>ğŸ’¬ PAZARLIK</button>
                                <button class="btn btn-purple" onclick="actionBluff()" ${patienceLow || isConsulting ? 'disabled' : ''}>ğŸ² BLÃ–F</button>
                                <button class="btn btn-danger" onclick="actionThreaten()" ${patienceLow || isConsulting ? 'disabled' : ''}>ğŸ¤¬ TEHDÄ°T</button>
                                <button class="btn" style="background:transparent; border:1px solid #555;" onclick="actionCancel()" ${isConsulting ? 'disabled' : ''}>âŒ VAZGEÃ‡</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        window.actionAccept = function() {
            // Sell item
            gameState.money += negotiationState.currentOffer;

            // Remove item
            gameState.inventory = gameState.inventory.filter(i => i.id !== negotiationState.item.id);
            // Clear from memory as it's sold
            if (gameState.negotiationMemory[negotiationState.item.id]) {
                delete gameState.negotiationMemory[negotiationState.item.id];
            }

            // Reputation small boost for easy deal
            changeReputation(1);

            negotiationState = null;
            updateHeader();
            renderShop();
        };

        window.actionCancel = function() {
            saveNegotiationState();
            negotiationState = null;
            renderShop();
        };

        window.showCounterInput = function() {
            const currentOffer = negotiationState.currentOffer;
            const promptAmount = prompt("KarÅŸÄ± teklifin nedir? (Sadece sayÄ±)", currentOffer);
            if (promptAmount) {
                const val = parseInt(promptAmount);
                if (!isNaN(val)) {
                    processCounterOffer(val);
                }
            }
        };

        function processCounterOffer(playerOffer) {
            const state = negotiationState;
            const item = state.item;
            const realValue = item.realValue;

            // Logic: Is the offer reasonable?
            let repBonus = (gameState.reputation - 50) / 100; // -0.5 to 0.5
            let maxTolerable = realValue * (1.0 + repBonus);

            // Certification Logic: If rare/legendary and NOT certified, he won't pay near full value
            // unless forced or convinced.
            if ((item.type === 'rare' || item.type === 'legendary') && !item.certified) {
                // If Friendly, he is slightly more lenient
                if (gameState.reputation > 70) maxTolerable = realValue * 0.65;
                else maxTolerable = realValue * 0.5;
            }

            // Hidden Interest Mechanic
            if (item.eoInterest === 2) {
                // He really wants it, so he will tolerate higher prices eventually
                maxTolerable *= 1.5;
            } else if (item.eoInterest === 1) {
                maxTolerable *= 1.2;
            }

            if (playerOffer <= state.currentOffer) {
                state.dialogue = "Daha dÃ¼ÅŸÃ¼k teklif mi? Kafan mÄ± gÃ¼zel? Neyse, kabul.";
                state.currentOffer = playerOffer;
                renderNegotiation();
                return;
            }

            if (playerOffer <= maxTolerable) {
                // Success chance based on how greedy the player is
                const greedFactor = playerOffer / realValue; // 1.0 = fair, 1.2 = pushing it
                // Friend bonus: easier to convince
                let successChanceModifier = (gameState.reputation - 50) / 200; // +/- 0.25

                const roll = Math.random();

                if (roll > (greedFactor - 0.5 - successChanceModifier)) {
                    // Accepted
                    state.currentOffer = playerOffer;

                    if (item.eoInterest === 2) {
                         state.dialogue = "Tamam tamam, alÄ±yorum. SakÄ±n kimseye bu fiyattan bahsetme.";
                    } else {
                         state.dialogue = EO_AI.getLine('accept', gameState.reputation);
                    }
                } else {
                    // Counter-counter
                    const middleGround = Math.floor((state.currentOffer + playerOffer) / 2);
                    state.currentOffer = middleGround;
                    state.dialogue = EO_AI.getLine('lowball', gameState.reputation);
                    gameState.eoPatience -= 1;
                }
            } else {
                // Insultingly high
                state.dialogue = EO_AI.getLine('reject', gameState.reputation);
                gameState.eoPatience -= 1;
            }

            saveNegotiationState();
            checkPatience();
            renderNegotiation();
        }

        window.actionBluff = function() {
            const state = negotiationState;
            // Bluff mechanics: Try to increase perceived value
            const roll = Math.random();
            const successChance = 0.4 + (gameState.reputation / 200);

            if (roll < successChance) {
                // Success
                state.currentOffer = Math.floor(state.currentOffer * 1.5);
                state.dialogue = "Hmm... GerÃ§ekten mi? Bak bunu fark etmemiÅŸtim. FiyatÄ± arttÄ±rÄ±yorum.";
            } else {
                // Fail
                state.dialogue = "Kimi kandÄ±rÄ±yorsun sen? Bu numara bana sÃ¶kmez.";
                gameState.eoPatience -= 2;
                changeReputation(-5);
            }
            saveNegotiationState();
            checkPatience();
            renderNegotiation();
        };

        window.actionThreaten = function() {
            const state = negotiationState;
            // High risk
            const roll = Math.random();
            if (roll > 0.7) {
                // Success: Force max value
                state.currentOffer = Math.floor(state.item.realValue * 1.2);
                state.dialogue = EO_AI.getLine('threatResponse');
                changeReputation(-10); // Reputation hit even if successful
            } else {
                // Fail: EO ends negotiation
                state.dialogue = "Defol dÃ¼kkanÄ±mdan!";
                gameState.eoPatience = 0;
            }
            saveNegotiationState();
            checkPatience();
            renderNegotiation();
        };

        function checkPatience() {
            if (gameState.eoPatience <= 0) {
                // Force sell at low price or kick out?
                // For now, let's say he forces the last offer or kicks out.
                // Let's make him withdraw the offer and offer a pity amount (scrap value).
                negotiationState.dialogue = "SabrÄ±mÄ± taÅŸÄ±rdÄ±n. Ya bu fiyata alÄ±rsÄ±n ya da defolursun.";
                // Don't nuke the offer completely to 0, just leave it as last offer, but he refuses to negotiate more.
                // Reverting logic: "eÅŸyalara verdiÄŸi son teklifi ... sÄ±fÄ±rlanmasÄ±n"
                // But if he gets angry, does he lower it?
                // The prompt says: "eÅŸyalara verdiÄŸi son teklifi ve sabrÄ± vazgeÃ§ tuÅŸuna tÄ±klayÄ±nca sÄ±fÄ±rlanmasÄ±n"
                // It doesn't explicitly say we can't lower it on failed negotiations.
                // But usually "SabrÄ±mÄ± taÅŸÄ±rdÄ±n" means take it or leave it.
                // I will keep the current offer but prevent further actions (handled in renderNegotiation via disabled buttons).
            }
        }

        // --- HELPERS ---
        function changeReputation(amount) {
            gameState.reputation = Math.min(100, Math.max(0, gameState.reputation + amount));
        }

        function finishRound() {
            gameState.round++;
            gameState.availableUnits = [];
            ui.app.innerHTML = `
                <div class="screen">
                    <h2>TUR TAMAMLANDI</h2>
                    <p>BugÃ¼nkÃ¼ hasÄ±latÄ± topladÄ±n.</p>
                    <p class="money" style="font-size:2rem">${gameState.money} â‚º</p>
                    <button class="btn" onclick="startRound()">SONRAKÄ° TUR</button>
                </div>
            `;
            updateHeader();
        }

        window.buyUnit = function(id) {
            const unit = gameState.availableUnits.find(u => u.id === id);
            if(gameState.money < unit.price) return;

            gameState.money -= unit.price;
            gameState.currentUnit = unit;
            updateHeader();

            // Generate items
            const newItems = generateItemsForUnit(unit);
            gameState.inventory.push(...newItems);

            revealItems(newItems);
        };

        function generateItemsForUnit(unit) {
            const itemCount = 3 + Math.floor(Math.random() * 3); // 3-5 items
            const items = [];

            for(let i=0; i<itemCount; i++) {
                // Determine rarity based on risk
                let roll = Math.random();
                let chosenType = 'junk';

                if (unit.risk === 3) { // Black Market: High Risk / High Reward
                    // 40% Junk, 30% Rare, 30% Legendary
                    if (roll < 0.40) chosenType = 'junk';
                    else if (roll < 0.70) chosenType = 'rare';
                    else chosenType = 'legendary';
                } else if (unit.risk === 0) { // Low Risk: Mostly Common (0.4-0.95), some Junk (<0.4), rare Rare (>0.95)
                    if (roll < 0.40) chosenType = 'junk';
                    else if (roll < 0.95) chosenType = 'common';
                    else chosenType = 'rare'; // 5% Rare, 0% Legendary
                } else if (unit.risk === 1) { // Med Risk: Balanced
                    if (roll < 0.30) chosenType = 'junk';
                    else if (roll < 0.85) chosenType = 'common';
                    else if (roll < 0.985) chosenType = 'rare'; // 13.5% Rare
                    else chosenType = 'legendary'; // 1.5% Legendary (Very rare)
                } else { // High Risk: High Junk, but potential for Rare/Legendary
                    if (roll < 0.50) chosenType = 'junk'; // 50% Junk
                    else if (roll < 0.85) chosenType = 'common'; // 35% Common
                    else if (roll < 0.98) chosenType = 'rare'; // 13% Rare
                    else chosenType = 'legendary'; // 2% Legendary
                }

                const possibleItems = ITEMS_DB.filter(x => x.type === chosenType);
                const template = possibleItems[Math.floor(Math.random() * possibleItems.length)];

                // Variation in value
                const valueVariation = 0.8 + (Math.random() * 0.4); // +/- 20%
                const finalValue = Math.floor(template.baseValue * valueVariation);

                items.push({
                    ...template,
                    realValue: finalValue,
                    eoInterest: Math.random() > 0.8 ? 2 : (Math.random() > 0.5 ? 1 : 0), // 0=None, 1=Mild, 2=High
                    id: Date.now() + i
                });
            }
            return items;
        }

        function revealItems(newItems) {
            const listHtml = newItems.map(item => {
                let rarityInfo = Object.values(RARITY).find(r => r.id === item.type);
                return `
                <div class="item-row rarity-${item.type}">
                    <div>
                        <strong>${item.name}</strong><br>
                        <span style="color:${rarityInfo.color}; font-size:0.8rem">${rarityInfo.label}</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span style="color:#888; font-size:0.9rem">Tahmini: ???</span>
                    </div>
                </div>
                `;
            }).join('');

            ui.app.innerHTML = `
                <div class="screen">
                    <h2>DEPODAN Ã‡IKANLAR</h2>
                    <div class="item-list">
                        ${listHtml}
                    </div>
                    <button class="btn" onclick="startHubPhase()">ğŸ™ï¸ ÅEHÄ°R MERKEZÄ°NE GÄ°T</button>
                </div>
            `;
        }

        // --- WORKSHOP SYSTEM ---
        window.startWorkshopPhase = function() {
            renderWorkshop();
        };

        function renderWorkshop() {
            const junkItems = gameState.inventory.filter(i => i.type === 'junk');
            const repairCost = 200;
            const canAfford = gameState.money >= repairCost;

            // Restorer Skill Chance
            const skillLevel = gameState.skills.restorer || 0;
            const successChance = Math.min(0.9, 0.3 + (skillLevel * 0.15));

            const listHtml = junkItems.map(item => `
                <div class="item-row rarity-junk">
                    <div>
                        <strong>${item.name}</strong><br>
                        <span style="color:#9e9e9e; font-size:0.8rem">Hurda</span>
                    </div>
                    <button class="btn" onclick="repairItem(${item.id})" ${!canAfford ? 'disabled' : ''}>
                        ğŸ”¨ ONAR (${repairCost}â‚º) %${Math.round(successChance * 100)}
                    </button>
                </div>
            `).join('');

            ui.app.innerHTML = `
                <div class="screen screen-glass">
                    <h2>ğŸ› ï¸ ATÃ–LYE</h2>
                    <p>Hurda eÅŸyalarÄ± onarmayÄ± dene. BaÅŸarÄ±sÄ±z olursan eÅŸya yok olur!</p>
                    <p>Paran: <span class="money">${gameState.money} â‚º</span></p>

                    ${junkItems.length === 0 ? '<p>OnarÄ±lacak hurda yok.</p>' : `<div class="item-list">${listHtml}</div>`}

                    <button class="btn" onclick="startHubPhase()">ğŸ™ï¸ ÅEHRE DÃ–N</button>
                </div>
            `;
        }

        window.repairItem = function(itemId) {
            if (gameState.money < 200) return;
            gameState.money -= 200;

            const itemIndex = gameState.inventory.findIndex(i => i.id === itemId);
            if (itemIndex === -1) return;
            const item = gameState.inventory[itemIndex];

            // Success Check
            const skillLevel = gameState.skills.restorer || 0;
            const successChance = Math.min(0.9, 0.3 + (skillLevel * 0.15));

            if (Math.random() < successChance) {
                // Success! Convert to Common or Rare
                const isRare = Math.random() < 0.3; // 30% chance for Rare upgrade
                const newType = isRare ? 'rare' : 'common';

                // Update Item
                item.type = newType;
                item.name = item.name.replace(' (Hurda)', '').replace('KÄ±rÄ±k ', 'OnarÄ±lmÄ±ÅŸ ').replace('Bozuk ', 'Tamir EdilmiÅŸ ');
                if (!item.name.includes('OnarÄ±lmÄ±ÅŸ') && !item.name.includes('Tamir EdilmiÅŸ')) {
                    item.name = "OnarÄ±lmÄ±ÅŸ " + item.name;
                }

                // Update Value
                const baseVal = isRare ? 5000 : 500;
                item.realValue = Math.floor(baseVal * (0.8 + Math.random() * 0.4));
                item.certified = false; // Reset certification

                alert(`ğŸ‰ BAÅARILI! EÅŸya onarÄ±ldÄ±: ${item.name}`);
            } else {
                // Fail - Destroy
                gameState.inventory.splice(itemIndex, 1);
                alert("ğŸ’¥ BAÅARISIZ! EÅŸya parÃ§alarÄ±na ayrÄ±ldÄ± ve yok oldu.");
            }
            updateHeader();
            renderWorkshop();
        };

        // --- SKILL SYSTEM ---
        window.startSkillsPhase = function() {
            renderSkills();
        };

        function renderSkills() {
            const skillHtml = Object.values(SKILLS_CONFIG).map(skill => {
                const currentLvl = gameState.skills[skill.id] || 0;
                const canUpgrade = currentLvl < skill.maxLevel && gameState.skillPoints >= skill.cost;

                return `
                <div class="item-row" style="background:rgba(255,255,255,0.05); flex-direction:column; align-items:flex-start; gap:10px;">
                    <div style="width:100%; display:flex; justify-content:space-between; align-items:center;">
                        <div>
                            <strong style="font-size:1.1rem; color:var(--accent-color)">${skill.name}</strong>
                            <span style="font-size:0.8rem; margin-left:10px; background:#333; padding:2px 6px; border-radius:4px;">Lvl ${currentLvl}/${skill.maxLevel}</span>
                        </div>
                        <button class="btn btn-purple" onclick="purchaseSkill('${skill.id}')" ${!canUpgrade ? 'disabled' : ''}>
                            ${currentLvl >= skill.maxLevel ? 'MAX' : `YÃœKSELT (${skill.cost} Puan)`}
                        </button>
                    </div>
                    <p style="margin:0; opacity:0.8; font-size:0.9rem">${skill.desc}</p>
                </div>
                `;
            }).join('');

            ui.app.innerHTML = `
                <div class="screen screen-glass">
                    <h2>ğŸ§  YETENEKLER</h2>
                    <p>Seviye atlayarak yetenek puanÄ± kazan.</p>
                    <p>Mevcut Puan: <span style="color:var(--accent-color); font-weight:bold; font-size:1.5rem;">${gameState.skillPoints}</span></p>

                    <div class="item-list">
                        ${skillHtml}
                    </div>

                    <button class="btn" onclick="startHubPhase()">ğŸ™ï¸ ÅEHRE DÃ–N</button>
                </div>
            `;
        }

        window.purchaseSkill = function(skillId) {
            const skill = SKILLS_CONFIG[skillId];
            if (!skill) return;
            const currentLvl = gameState.skills[skillId] || 0;

            if (currentLvl < skill.maxLevel && gameState.skillPoints >= skill.cost) {
                gameState.skillPoints -= skill.cost;
                gameState.skills[skillId]++;

                // Immediate Effects
                if (skillId === 'hoarder') {
                    gameState.inventoryLimit += 5;
                    alert("Depo kapasitesi artÄ±rÄ±ldÄ±!");
                }

                renderSkills();
            }
        };

        // --- WAREHOUSE SYSTEM ---
        window.startWarehousePhase = function() {
            renderWarehouse();
        };

        function renderWarehouse() {
            const upgradeCost = 5000 * gameState.storageLevel;
            const canAfford = gameState.money >= upgradeCost;

            const listHtml = gameState.inventory.map(item => {
                let rarityInfo = Object.values(RARITY).find(r => r.id === item.type);
                return `
                <div class="item-row rarity-${item.type}" style="padding:10px;">
                    <div style="font-size:0.9rem">
                        <strong>${item.name}</strong> (${rarityInfo.label})
                    </div>
                    <div style="font-size:0.8rem; color:#aaa;">
                        ${item.certified ? `DeÄŸer: ${item.realValue} â‚º` : 'DeÄŸer: ???'}
                    </div>
                </div>
                `;
            }).join('');

            ui.app.innerHTML = `
                <div class="screen screen-glass">
                    <h2>ğŸ“¦ DEPO YÃ–NETÄ°MÄ°</h2>
                    <div style="display:flex; justify-content:space-around; margin:20px 0;">
                        <div>
                            <div class="stat-label">KAPASÄ°TE</div>
                            <div style="font-size:1.5rem">${gameState.inventory.length} / ${gameState.inventoryLimit}</div>
                        </div>
                        <div>
                            <div class="stat-label">GÃœNLÃœK KÄ°RA</div>
                            <div style="font-size:1.5rem; color:var(--danger-color)">${gameState.inventory.length * 50} â‚º</div>
                        </div>
                    </div>

                    <button class="btn btn-purple" onclick="upgradeStorage()" ${!canAfford ? 'disabled' : ''}>
                        â¬†ï¸ DEPOYU BÃœYÃœT (+5 Yer) - ${upgradeCost} â‚º
                    </button>

                    <h3 style="margin-top:30px; text-align:left;">Envanter</h3>
                    <div class="item-list" style="max-height:300px; overflow-y:auto;">
                        ${listHtml}
                    </div>

                    <button class="btn" onclick="startHubPhase()">ğŸ™ï¸ ÅEHRE DÃ–N</button>
                </div>
            `;
        }

        window.upgradeStorage = function() {
            const upgradeCost = 5000 * gameState.storageLevel;
            if (gameState.money >= upgradeCost) {
                gameState.money -= upgradeCost;
                gameState.inventoryLimit += 5;
                gameState.storageLevel++;
                alert("Depo bÃ¼yÃ¼tÃ¼ldÃ¼! Yeni kapasite: " + gameState.inventoryLimit);
                updateHeader();
                renderWarehouse();
            }
        };

        window.startHubPhase = function() {
            renderHub();
        };

        function renderHub() {
             // Quest Display
             const questsHtml = gameState.quests.map(q =>
                 `<div style="font-size:0.85rem; background:rgba(255,255,255,0.05); padding:8px; border-radius:5px; margin-bottom:5px; text-align:left; border-left:3px solid ${q.completed ? 'var(--success-color)' : 'var(--accent-color)'}">
                    ${q.completed ? 'âœ…' : 'ğŸ“œ'} ${q.text} (${q.current}/${q.count})
                 </div>`
             ).join('');

             ui.app.innerHTML = `
                <div class="screen">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h2>ğŸ™ï¸ ÅEHÄ°R MERKEZÄ°</h2>
                        <div style="text-align:right;">
                            <span style="font-size:0.9rem; color:var(--accent-color)">Seviye ${gameState.level}</span><br>
                            <span style="font-size:0.8rem; opacity:0.7">${gameState.xp}/${gameState.level * 1000} XP</span>
                        </div>
                    </div>

                    ${gameState.quests.length > 0 ? `
                        <div style="margin-bottom:20px;">
                            <h4 style="margin:5px 0; text-align:left; opacity:0.8;">GÃœNLÃœK GÃ–REVLER</h4>
                            ${questsHtml}
                        </div>
                    ` : ''}

                    <div class="hub-menu">
                        <div class="hub-card" onclick="renderStorageSelection()">
                            <div class="hub-icon">ğŸ“¢</div>
                            <div class="hub-title">Ä°hale AlanÄ±</div>
                            <div>Kalan depolarÄ± incele ve satÄ±n al.</div>
                        </div>

                        <div class="hub-card" onclick="startShopPhase()">
                            <div class="hub-icon">ğŸª</div>
                            <div class="hub-title">EO'nun DÃ¼kkanÄ±</div>
                            <div>EÅŸyalarÄ± sat ve pazarlÄ±k yap.</div>
                        </div>

                        <div class="hub-card" onclick="startExpertPhase()">
                            <div class="hub-icon">ğŸ§</div>
                            <div class="hub-title">Ekspertiz</div>
                            <div>EÅŸyalarÄ± onaylat ve deÄŸerini Ã¶ÄŸren.</div>
                        </div>

                        <div class="hub-card" onclick="startWorkshopPhase()">
                            <div class="hub-icon">ğŸ› ï¸</div>
                            <div class="hub-title">AtÃ¶lye</div>
                            <div>Hurda eÅŸyalarÄ± onar.</div>
                        </div>

                        <div class="hub-card" onclick="startSkillsPhase()">
                            <div class="hub-icon">ğŸ§ </div>
                            <div class="hub-title">Yetenekler</div>
                            <div>Karakterini geliÅŸtir.</div>
                        </div>

                        <div class="hub-card" onclick="startWarehousePhase()">
                            <div class="hub-icon">ğŸ“¦</div>
                            <div class="hub-title">Depo</div>
                            <div>Envanterini yÃ¶net.</div>
                        </div>

                        <div class="hub-card" onclick="finishRound()" style="border-color:var(--success-color)">
                            <div class="hub-icon">ğŸ’¤</div>
                            <div class="hub-title">GÃ¼nÃ¼ Bitir</div>
                            <div>Sonraki tura geÃ§.</div>
                        </div>
                    </div>
                </div>
            `;
        }

    </script>
</body>
</html>
